(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58966,e=>{"use strict";let t=(0,e.i(25594).createClient)("https://umorkbxikucjlluzezhq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVtb3JrYnhpa3VjamxsdXplemhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyMzI5MDUsImV4cCI6MjA3NTgwODkwNX0.23X_5s8diNiS00tPZfYXjrii9lJ6IYLmL6JNbdGrW9k",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});e.s(["supabase",0,t])},17921,e=>{"use strict";var t=e.i(4671),s=e.i(76315),r=e.i(69024),i=e.i(58966);async function a(){if(!("geolocation"in navigator))return null;let{latitude:e,longitude:t}=(await new Promise((e,t)=>navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4}))).coords,{data:{user:s}}=await i.supabase.auth.getUser();return s?(await i.supabase.from("profiles").update({lat:e,lon:t,last_active:new Date().toISOString()}).eq("id",s.id),{lat:e,lon:t}):null}async function n(){if(!("permissions"in navigator))return"prompt";try{return(await navigator.permissions.query({name:"geolocation"})).state}catch{return"prompt"}}async function o(){if(!("geolocation"in navigator))throw Error("Geolocation is not supported by this browser");return new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lon:t.coords.longitude})},e=>{t(e)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})}function l(){let e=(0,r.useRouter)(),[i,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(""),[u,m]=(0,s.useState)("prompt");(0,s.useEffect)(()=>{n().then(m)},[]),(0,s.useEffect)(()=>{"granted"===u&&e.replace("/profile-builder")},[u,e]);let h=async()=>{l(!0),d("");try{await o()?(await a(),e.push("/profile-builder")):(d("Location access is required to find matches near you. Please enable location in your browser settings."),m("denied"))}catch(e){console.error("Location request error:",e),d("Failed to access location. Please try again.")}finally{l(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-pink-50 px-4",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsxs)("svg",{className:"w-10 h-10 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-center mb-2",children:"Enable Location"}),(0,t.jsx)("p",{className:"text-gray-600 text-center mb-6",children:"Find compatible matches near you"}),(0,t.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 mb-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-purple-900 mb-3",children:"Why we need your location:"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm text-purple-800",children:[(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,t.jsx)("span",{children:"Show you matches in your area"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,t.jsx)("span",{children:"Display distance to potential matches"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,t.jsx)("span",{children:"Improve match relevance and quality"})]})]})]}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-6",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,t.jsxs)("div",{className:"text-sm text-blue-900",children:[(0,t.jsx)("p",{className:"font-medium mb-1",children:"Your privacy matters"}),(0,t.jsx)("p",{className:"text-blue-700",children:"We never share your exact location. Only approximate distance is shown to matches."})]})]})}),c&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 rounded-lg text-red-800 text-sm",children:c}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("button",{onClick:h,disabled:i||"granted"===u,className:"w-full py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Requesting access...":"granted"===u?"Location enabled âœ“":"Enable Location"}),(0,t.jsx)("button",{onClick:()=>{e.push("/profile-builder")},className:"w-full py-3 text-gray-600 hover:text-gray-900 font-medium",children:"Skip for now"})]}),"denied"===u&&(0,t.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-700",children:[(0,t.jsx)("p",{className:"font-medium mb-2",children:"Location access blocked"}),(0,t.jsx)("p",{className:"mb-2",children:"To enable location:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[(0,t.jsx)("li",{children:"Click the lock icon in your browser's address bar"}),(0,t.jsx)("li",{children:'Find "Location" in the permissions list'}),(0,t.jsx)("li",{children:'Select "Allow" and refresh this page'})]})]})]})})}e.s(["default",()=>l],17921)}]);