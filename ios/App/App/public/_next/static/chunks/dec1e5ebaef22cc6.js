(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58966,e=>{"use strict";let t=(0,e.i(25594).createClient)("https://umorkbxikucjlluzezhq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVtb3JrYnhpa3VjamxsdXplemhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyMzI5MDUsImV4cCI6MjA3NTgwODkwNX0.23X_5s8diNiS00tPZfYXjrii9lJ6IYLmL6JNbdGrW9k",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});e.s(["supabase",0,t])},48316,e=>{"use strict";var t=e.i(4671),r=e.i(76315),s=e.i(69024),l=e.i(58966);async function n(e){return l.supabase.auth.signInWithOtp({phone:e})}async function a(e,t){return l.supabase.auth.verifyOtp({phone:e,token:t,type:"sms"})}function o(e){let t=e.replace(/\D/g,"");return 11===t.length&&t.startsWith("1")?`+1 (${t.slice(1,4)}) ${t.slice(4,7)}-${t.slice(7)}`:10===t.length?`+1 (${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:t.length>0&&!e.startsWith("+")?`+${t}`:e}function i(e){let t=e.replace(/\D/g,"");return 11===t.length&&t.startsWith("1")?`+${t}`:10===t.length?`+1${t}`:t.length>0&&!e.startsWith("+")?`+${t}`:e.startsWith("+")?e:`+${t}`}function c(e){let t=e.replace(/\D/g,"");return!(t.length<10)&&!(t.length>15)&&t.length>=10}function d({value:e,onChange:s,onValidChange:l,placeholder:n="(555) 555-5555",disabled:a=!1,required:d=!1,autoFocus:u=!1,className:h=""}){let[p,x]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)("+1");return(0,r.useEffect)(()=>{e&&x(o(e))},[e]),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("select",{value:f,onChange:e=>{let t=e.target.value;if(b(t),p){let e=i(p,t),r=c(e);g(r),l?.(r),r&&s(e)}},disabled:a,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"+1",children:"ðŸ‡ºðŸ‡¸ +1"}),(0,t.jsx)("option",{value:"+44",children:"ðŸ‡¬ðŸ‡§ +44"}),(0,t.jsx)("option",{value:"+91",children:"ðŸ‡®ðŸ‡³ +91"}),(0,t.jsx)("option",{value:"+86",children:"ðŸ‡¨ðŸ‡³ +86"}),(0,t.jsx)("option",{value:"+81",children:"ðŸ‡¯ðŸ‡µ +81"}),(0,t.jsx)("option",{value:"+49",children:"ðŸ‡©ðŸ‡ª +49"}),(0,t.jsx)("option",{value:"+33",children:"ðŸ‡«ðŸ‡· +33"}),(0,t.jsx)("option",{value:"+61",children:"ðŸ‡¦ðŸ‡º +61"}),(0,t.jsx)("option",{value:"+55",children:"ðŸ‡§ðŸ‡· +55"}),(0,t.jsx)("option",{value:"+52",children:"ðŸ‡²ðŸ‡½ +52"})]}),(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)("input",{type:"tel",value:p,onChange:e=>{let t=e.target.value;x(t);let r=i(t,f),n=c(r);g(n),l?.(n),n&&s(r)},placeholder:n,disabled:a,required:d,autoFocus:u,className:`
            w-full px-4 py-2 border rounded-lg
            focus:ring-2 focus:ring-purple-500 focus:border-transparent
            ${m&&p?"border-green-500":"border-gray-300"}
            ${!m&&p?"border-red-500":""}
            ${a?"bg-gray-100 cursor-not-allowed":""}
            ${h}
          `}),p&&(0,t.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:m?(0,t.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,t.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}function u({value:e,onChange:s,length:l=6,disabled:n=!1,autoFocus:a=!0,onComplete:o}){let[i,c]=(0,r.useState)(Array(l).fill(""));(0,r.useEffect)(()=>{c(e.padEnd(l,"").split("").slice(0,l))},[e,l]);let d=e=>{e.preventDefault();let t=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,l),r=[...i];for(let e=0;e<t.length;e++)r[e]=t[e];c(r);let n=r.join("");s(n),n.length===l&&o&&o(n)};return(0,t.jsx)("div",{className:"flex gap-2 justify-center",children:i.map((e,r)=>(0,t.jsx)("input",{id:`otp-${r}`,type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>((e,t)=>{if(t&&!/^\d$/.test(t))return;let r=[...i];r[e]=t,c(r);let n=r.join("");if(s(n),t&&e<l-1){let t=document.getElementById(`otp-${e+1}`);t?.focus()}n.length===l&&o&&o(n)})(r,e.target.value),onKeyDown:e=>((e,t)=>{if("Backspace"===t.key&&!i[e]&&e>0){let t=document.getElementById(`otp-${e-1}`);t?.focus()}})(r,e),onPaste:d,disabled:n,autoFocus:a&&0===r,className:`
            w-12 h-14 text-center text-2xl font-bold
            border-2 rounded-lg
            focus:ring-2 focus:ring-purple-500 focus:border-purple-500
            ${e?"border-purple-500":"border-gray-300"}
            ${n?"bg-gray-100 cursor-not-allowed":""}
          `},r))})}function h({onSuccess:e}){let[s,l]=(0,r.useState)(""),[a,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),p=async t=>{if(t.preventDefault(),a){c(!0),h("");try{let{error:t}=await n(s);if(t)throw t;e(s)}catch(e){console.error("Phone OTP error:",e),h(e.message||"Failed to send code")}finally{c(!1)}}};return(0,t.jsxs)("div",{className:"max-w-md mx-auto p-6",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Verify your phone"}),(0,t.jsx)("p",{className:"text-gray-600",children:"We'll send you a code to verify your number"})]}),(0,t.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,t.jsx)(d,{value:s,onChange:l,onValidChange:o,autoFocus:!0}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Standard messaging rates may apply"})]}),u&&(0,t.jsx)("div",{className:"p-3 bg-red-100 border border-red-200 rounded-lg text-red-800 text-sm",children:u}),(0,t.jsx)("button",{type:"submit",disabled:!a||i,className:"w-full py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Sending code...":"Send verification code"})]})]})}function p({phone:e,onSuccess:s,onBack:l}){let[i,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)(0);(0,r.useState)(()=>{if(f>0){let e=setTimeout(()=>b(f-1),1e3);return()=>clearTimeout(e)}});let j=async t=>{h(!0),x("");try{let{error:r}=await a(e,t);if(r)throw r;s()}catch(e){console.error("OTP verification error:",e),x("Invalid code. Please try again."),c("")}finally{h(!1)}},v=async()=>{g(!0),x("");try{let{error:t}=await n(e);if(t)throw t;b(60),x("")}catch(e){console.error("Resend error:",e),x("Failed to resend code")}finally{g(!1)}};return(0,t.jsxs)("div",{className:"max-w-md mx-auto p-6",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Enter verification code"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["We sent a 6-digit code to",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:o(e)})]}),(0,t.jsx)("button",{onClick:l,className:"text-sm text-purple-600 hover:text-purple-700 mt-2",children:"Change number"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(u,{value:i,onChange:c,onComplete:j,disabled:d}),d&&(0,t.jsxs)("div",{className:"text-center text-gray-600",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-sm",children:"Verifying code..."})]}),p&&(0,t.jsx)("div",{className:"p-3 bg-red-100 border border-red-200 rounded-lg text-red-800 text-sm text-center",children:p}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Didn't receive the code?"}),(0,t.jsx)("button",{onClick:v,disabled:m||f>0,className:"text-purple-600 hover:text-purple-700 font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Sending...":f>0?`Resend in ${f}s`:"Resend code"})]})]})]})}function x(){let e=(0,s.useRouter)(),[l,n]=(0,r.useState)("phone"),[a,o]=(0,r.useState)("");return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-white rounded-lg shadow-lg",children:["phone"===l&&(0,t.jsx)(h,{onSuccess:e=>{o(e),n("otp")}}),"otp"===l&&(0,t.jsx)(p,{phone:a,onSuccess:()=>{e.replace("/profile-builder")},onBack:()=>{n("phone"),o("")}})]})})}e.s(["OtpVerificationStep",()=>p,"PhoneEntryStep",()=>h,"default",()=>x],48316)}]);