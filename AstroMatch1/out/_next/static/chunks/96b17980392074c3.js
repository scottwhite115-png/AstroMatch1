(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62394,e=>{"use strict";var t=e.i(4671),i=e.i(70001),n=e.i(27215),r=e.i(27110),s=e.i(12902);function a(e){let t=e.toLowerCase();return["aries","leo","sagittarius"].includes(t)?"Fire":["taurus","virgo","capricorn"].includes(t)?"Earth":["gemini","libra","aquarius"].includes(t)?"Air":["cancer","scorpio","pisces"].includes(t)?"Water":"Fire"}e.s(["ConnectionBoxNew",0,e=>{let{westA:o,eastA:l,westB:c,eastB:d,score:u,connectionBlurb:h,aboutMe:g,theme:m="dark",chinesePattern:f,isChineseOpposite:p=!1}=e,x=(0,r.normalizeChineseAnimal)(l),b=(0,r.normalizeChineseAnimal)(d),{basePattern:w,sanHeTrineName:y}=(0,r.detectBasePattern)(x,b),k=(0,r.detectOverlayPatterns)(x,b),v=(0,r.areOppositeBranches)(x,b),C=a(o),S=a(c),j=`${o} / ${l}`,N=`${c} / ${d}`,A=(0,n.getWesternSignGlyph)(o),$=(0,n.getChineseSignGlyph)(l),I=(0,n.getWesternSignGlyph)(c),E=(0,n.getChineseSignGlyph)(d),_=(0,s.getChineseDetailedCompat)(x.toLowerCase(),b.toLowerCase()),P=(0,s.getWesternDetailedCompat)(o.toLowerCase(),c.toLowerCase());console.log("[ConnectionBoxNew] Lookup params:",{animalA:x.toLowerCase(),animalB:b.toLowerCase(),westA:o.toLowerCase(),westB:c.toLowerCase(),chineseCompat:_?"FOUND":"NULL",westernCompat:P?"FOUND":"NULL"});let T="",L="",O="";_?(T=_.heading,console.log("[ConnectionBoxNew] Chinese compat data:",{heading:T,tagline:L=_.tagline,text:O=_.description,animalA:x,animalB:b})):(T=`${x} \xd7 ${b} â€” ${w}`,L="Click for details",O=`${x} and ${b} compatibility information. Base pattern: ${w}${k.length>0?`, overlays: ${k.join(", ")}`:""}.`,console.log("[ConnectionBoxNew] No detailed compat found, using fallback for:",x,b));let M=P?.heading||"",R=P?.tagline||"",B=P?.description||"",H=o.toLowerCase()===c.toLowerCase(),U=l.toLowerCase()===d.toLowerCase();return(0,t.jsx)(i.ConnectionBox,{userAName:"You",userBName:"Match",userASignLabel:j,userBSignLabel:N,userAWestIcon:A,userAChineseIcon:$,userBWestIcon:I,userBChineseIcon:E,score:u,basePattern:w,overlays:k,sanHeTrineName:y,isOppositeBranches:v||p,sameChineseAnimal:U,sameWesternSign:H,elements:{a:C,b:S},connectionOverviewText:O,connectionOverviewHeading:T,connectionOverviewTagline:L,westernCompatibilityHeading:M,westernCompatibilityTagline:R,westernCompatibilityDescription:B,westernSignA:o,westernSignB:c,westernElementA:C,westernElementB:S,aboutPartnerText:g||"",age:e.age,city:e.city,occupation:e.occupation,height:e.height,children:e.children,interests:e.interests,relationshipGoals:e.relationshipGoals,theme:m,patternColors:e.patternColors,onMessage:e.onMessage,onPass:e.onPass,onLike:e.onLike,showProfile:e.showProfile,showElements:e.showElements})}])},27110,e=>{"use strict";var t=e.i(79119);let i={Visionaries:["Rat","Dragon","Monkey"],Strategists:["Ox","Snake","Rooster"],Adventurers:["Tiger","Horse","Dog"],Artists:["Rabbit","Goat","Pig"]},n=[["Rat","Ox"],["Tiger","Pig"],["Rabbit","Dog"],["Dragon","Rooster"],["Snake","Monkey"],["Horse","Goat"]],r=[["Rat","Horse"],["Ox","Goat"],["Tiger","Monkey"],["Rabbit","Rooster"],["Dragon","Dog"],["Snake","Pig"]],s=[["Rat","Goat"],["Ox","Horse"],["Tiger","Snake"],["Rabbit","Dragon"],["Monkey","Pig"],["Rooster","Dog"]],a=[["Rat","Rabbit"],["Ox","Goat","Dog"],["Tiger","Snake","Monkey"],["Dragon","Dragon"],["Horse","Horse"],["Rooster","Rooster"],["Pig","Pig"]],o=[["Rat","Rooster"],["Ox","Dragon"],["Tiger","Pig"],["Rabbit","Horse"],["Snake","Monkey"],["Goat","Dog"]];function l(e,t,i){return i.some(([i,n])=>e===i&&t===n||e===n&&t===i)}function c(e,t){if(e===t)return{basePattern:"SAME_SIGN"};let r=function(e,t){for(let[n,r]of Object.entries(i))if(r.includes(e)&&r.includes(t))return n;return null}(e,t);return r?{basePattern:"SAN_HE",sanHeTrineName:r}:l(e,t,n)?{basePattern:"LIU_HE"}:{basePattern:"NO_PATTERN"}}function d(e,t){let i=[];return l(e,t,r)&&i.push("LIU_CHONG"),l(e,t,s)&&i.push("LIU_HAI"),(e===t?["Dragon","Horse","Rooster","Pig"].includes(e):a.some(i=>i.includes(e)&&i.includes(t)))&&i.push("XING"),l(e,t,o)&&i.push("PO"),i}function u(e,t){return l(e,t,r)}function h(e){return["Snake","Horse"].includes(e)?"Fire":["Ox","Dragon","Goat","Dog"].includes(e)?"Earth":["Monkey","Rooster"].includes(e)?"Air":["Rat","Pig"].includes(e)?"Water":["Tiger","Rabbit"].includes(e)?"Earth":"Fire"}function g(e){let i,{chineseAnimalA:n,chineseAnimalB:r,...s}=e,{basePattern:a,sanHeTrineName:o}=c(n,r),l=d(n,r),g=u(n,r),m=n===r,f={a:h(n),b:h(r)};return i=l.includes("LIU_CHONG")?"LIU_CHONG":l.includes("LIU_HAI")?"LIU_HAI":l.includes("XING")?"XING":l.includes("PO")?"PO":"NO_PATTERN"===a?"NO_PATTERN":a,{...(0,t.buildMatchResult)({...s,pattern:i}),basePattern:a,overlays:l,sanHeTrineName:o,isOppositeBranches:g,sameChineseAnimal:m,westernElements:f}}function m(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}e.s(["areOppositeBranches",()=>u,"calculateEnhancedMatch",()=>g,"detectBasePattern",()=>c,"detectOverlayPatterns",()=>d,"normalizeChineseAnimal",()=>m])},70001,58365,e=>{"use strict";var t=e.i(4671),i=e.i(76315);function n(e){return e.some(e=>"LIU_HAI"===e||"XING"===e||"PO"===e)}function r(e,t){let i=t.includes("LIU_CHONG"),r=n(t);if(i)return"OPPOSITES";switch(e){case"SAN_HE":return"TRIPLE_HARMONY";case"LIU_HE":return"SUPPORTIVE_ALLY";case"SAME_SIGN":return"MIRROR";default:return r?"LESSON_REPAIR":"OPEN_PATTERN"}}function s(e,t){return"SAME_SIGN"===t?Math.min(e,70):e}function a(e,t,i,r){let s=i.includes("LIU_CHONG"),a=n(i);return s?"Magnetic Opposites Match":"SAN_HE"===t?"Soulmate Match":"LIU_HE"===t?"Secret Friends Match":"SAME_SIGN"===t?"Same Sign Match":"LESSON_REPAIR"===e||a?"Challenging Match":"Neutral Match"}function o(e,t,i){let r=i.includes("LIU_CHONG"),s=n(i),a="SAME_SIGN"===t&&i.includes("XING");return r?"Strong, opposite-style spark between very different types â€“ exciting, vivid, and rarely boring.":"SAN_HE"===t?"Two souls moving in perfect rhythm â€“ effortless harmony and shared purpose.":"LIU_HE"===t?"Quiet, loyal connection that feels safe to lean on and good in everyday life.":"SAME_SIGN"===t?a?"Same-sign dynamic where similar traits on both sides tend to replay the same themes.":"Mirror-like connection where you recognise your own strengths and blind spots in each other.":"LESSON_REPAIR"===e||s?"Lesson-heavy connection where attraction is mixed with extra tests and tension.":"Open-ended, easygoing connection that mostly becomes what you make of it together."}e.s(["applySameSignCap",()=>s,"deriveArchetype",()=>r,"getConnectionTagline",()=>o,"getMatchLabel",()=>a],58365);var l=e.i(59665);let c=({className:e})=>(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:e,children:(0,t.jsx)("path",{d:"m6 9 6 6 6-6"})});e.s(["ConnectionBox",0,({userAName:e,userBName:n,userASignLabel:s,userBSignLabel:d,userAWestIcon:u,userAChineseIcon:h,userBWestIcon:g,userBChineseIcon:m,score:f,basePattern:p,overlays:x=[],sanHeTrineName:b,isOppositeBranches:w,sameChineseAnimal:y,sameWesternSign:k,elements:v,elementRelationOverride:C,connectionOverviewText:S,connectionOverviewHeading:j,connectionOverviewTagline:N,westernCompatibilityHeading:A,westernCompatibilityTagline:$,westernCompatibilityDescription:I,westernSignA:E,westernSignB:_,westernElementA:P,westernElementB:T,aboutPartnerText:L,age:O,city:M,occupation:R,height:B,children:H,interests:U,relationshipGoals:F,theme:W="dark",patternColors:G,showProfile:D,showElements:X})=>{let q,z,[Y,Q]=(0,i.useState)(!1),[J,V]=(0,i.useState)(!1),[Z,K]=(0,i.useState)(!1),ee=void 0!==X?X:Y,et=void 0!==D?D:J;i.default.useEffect(()=>{console.log("[ConnectionBox] connectionOverviewText value:",S),console.log("[ConnectionBox] westernCompatibilityDescription value:",I),console.log("[ConnectionBox] showMatchLabelDropdown value:",Z),console.log("[ConnectionBox] Dropdown state:",{externalShowProfile:D,externalShowElements:X,showAbout:et,showOverview:ee,hasConnectionOverview:!!(S||I),hasAboutContent:!!(L||F||U||M||R||O||B||H),connectionOverviewText:S,westernCompatibilityDescription:I})},[D,X,et,ee,S,I,L,F,U,M,R,O,B,H]);let ei=C??function(e,t){if(e===t)return"same";let i=[e,t].sort().join("-");return"Air-Fire"===i||"Earth-Water"===i?"compatible":"Air-Water"===i||"Earth-Fire"===i?"semiCompatible":"opposite"}(v.a,v.b),{primaryLabel:en,tagline:er}=function(e,t=[],i,n,s,l,c){let d=r(e,t);return{primaryLabel:a(d,e,t,void 0!==c?c:75),tagline:o(d,e,t)}}(p,x,0,0,0,0,f),es=x??[],ea=function(e){switch(e){case"same":return"SAME";case"compatible":return"COMPATIBLE";case"semiCompatible":return"SEMI_COMPATIBLE";case"opposite":return"CLASH";default:return"NEUTRAL"}}(ei),eo=r(p,es);(0,l.deriveWesternEase)(ea),es.some(e=>"LIU_HAI"===e||"XING"===e||"PO"===e),es.length,(0,l.getChineseBaseChip)(p),(0,l.getChineseOverlayChips)(es),(0,l.getWesternChip)(v.a,v.b,ea),o(eo,p,es),function(e,t){if(e==="SAN_HE"){;}else{;}}(p,b),function(e=[]){e.map(e=>{switch(e){case"LIU_CHONG":return"âš ï¸ Liu Chong å…­å†² Â· Six Conflicts";case"LIU_HAI":return"ðŸ’” Liu Hai å…­å®³ Â· Six Harms";case"XING":return"ðŸ”¥ Xing åˆ‘ Â· Punishment Pattern";case"PO":return"ðŸ’¥ Po ç ´ Â· Break Pattern";default:return""}}).filter(Boolean)}(x),v.a,v.b;let el=A?(q=A.split(/[â€”â€“]/)).length>1?q.slice(1).join("â€”").trim():A:void 0,ec=s.split(" / ")[1]||"",ed=d.split(" / ")[1]||"",eu=j?(z=j.split(/[â€”â€“]/)).length>1?z.slice(1).join("â€”").trim():j:void 0,eh=G||("SAN_HE"===p?{start:"#fbbf24",end:"#f59e0b"}:"LIU_HE"===p?{start:"#c084fc",end:"#e879f9"}:"SAME_SIGN"===p||"SAME_ANIMAL"===p?{start:"#2dd4bf",end:"#14b8a6"}:{start:"#60a5fa",end:"#3b82f6"});return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"w-full",style:{borderRadius:"1.5rem",padding:"1.5rem 1.5rem 1.5rem 1.5rem",backgroundColor:"light"===W?"#ffffff":"#1e293b",position:"relative"},children:[(0,t.jsx)("div",{className:"py-2 w-full mb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[u&&(0,t.jsx)("span",{className:"text-3xl",children:u}),h&&(0,t.jsx)("span",{className:"text-3xl",children:h})]}),(0,t.jsx)("span",{className:`font-bold text-base whitespace-nowrap ${"light"===W?"text-slate-700":"text-slate-200"}`,children:s})]}),(0,t.jsx)("span",{className:`text-xl flex-shrink-0 self-center ${"light"===W?"text-pink-500":"text-pink-400"}`,children:"â™¥"}),(0,t.jsxs)("div",{className:"flex flex-col items-center flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[g&&(0,t.jsx)("span",{className:"text-3xl",children:g}),m&&(0,t.jsx)("span",{className:"text-3xl",children:m})]}),(0,t.jsx)("span",{className:`font-bold text-base whitespace-nowrap ${"light"===W?"text-slate-700":"text-slate-200"}`,children:d})]})]})}),(0,t.jsxs)("div",{className:"mb-4 mt-2 flex flex-col items-center justify-center w-full",style:{position:"relative",zIndex:1e4},children:[(0,t.jsxs)("div",{className:`inline-flex items-center rounded-full px-4 py-2 text-lg font-bold shadow-lg whitespace-nowrap border-2 cursor-pointer transition-all ${"light"===W?"bg-white":"bg-slate-900"}`,style:{borderColor:eh.start,color:"light"===W?"black":"white",position:"relative",zIndex:10001},onClick:e=>{e.stopPropagation(),console.log("Match pill clicked, current state:",Z),K(!Z),console.log("Match pill clicked, new state:",!Z)},children:[(0,t.jsx)("span",{children:en}),"number"==typeof f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:`ml-2 text-lg font-bold ${"light"===W?"text-black":"text-white"}`,children:[f,"%"]}),(0,t.jsx)(c,{className:`ml-2 w-5 h-5 transition-transform ${Z?"rotate-180":""} ${"light"===W?"text-black":"text-white"}`})]})]}),er&&(0,t.jsx)("div",{className:`text-center px-4 mt-3 text-base font-bold ${"light"===W?"text-slate-700":"text-slate-300"}`,children:er}),Z&&(0,t.jsx)("div",{style:{position:"absolute",top:"100%",left:"-1.5rem",right:"-1.5rem",zIndex:10002,marginTop:"0.5rem"},onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{style:{borderRadius:"1.5rem",backgroundColor:"light"===W?"#ffffff":"#1e293b",padding:"1.5rem",overflow:"hidden"},children:[S&&(0,t.jsxs)("div",{className:"mb-4 text-center",children:[ec&&ed&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1.5 mb-2",children:[h&&(0,t.jsx)("span",{className:"text-2xl",children:h}),(0,t.jsx)("span",{className:`font-bold text-lg ${"light"===W?"text-slate-700":"text-slate-200"}`,children:ec}),(0,t.jsx)("span",{className:`text-lg ${"light"===W?"text-pink-500":"text-pink-400"}`,children:"â™¥"}),(0,t.jsx)("span",{className:`font-bold text-lg ${"light"===W?"text-slate-700":"text-slate-200"}`,children:ed}),m&&(0,t.jsx)("span",{className:"text-2xl",children:m})]}),eu&&(0,t.jsx)("div",{className:"mb-1 text-center",children:eu.split(/,|;/).map(e=>e.trim()).filter(e=>e.length>0).map((e,i)=>(0,t.jsx)("h4",{className:`text-lg font-bold ${"light"===W?"text-slate-900":"text-slate-100"}`,children:e},i))}),N&&(0,t.jsx)("p",{className:`text-lg italic font-bold mb-0.5 text-center ${"light"===W?"text-black":"text-white"}`,children:N}),(0,t.jsx)("div",{className:"leading-relaxed whitespace-pre-line text-center",style:{marginBottom:"0",paddingBottom:"0",lineHeight:"1.5"},children:S})]}),I&&(0,t.jsxs)("div",{className:`${S?"pt-4 border-t":""} text-center ${"light"===W?"border-gray-200":"border-indigo-400/20"}`,style:{paddingBottom:"1rem"},children:[E&&_&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1.5 mb-2",children:[u&&(0,t.jsx)("span",{className:"text-2xl",children:u}),(0,t.jsx)("span",{className:`font-bold text-lg ${"light"===W?"text-slate-700":"text-slate-200"}`,children:E}),(0,t.jsx)("span",{className:`text-lg ${"light"===W?"text-pink-500":"text-pink-400"}`,children:"â™¥"}),(0,t.jsx)("span",{className:`font-bold text-lg ${"light"===W?"text-slate-700":"text-slate-200"}`,children:_}),g&&(0,t.jsx)("span",{className:"text-2xl",children:g})]}),el&&(0,t.jsx)("h4",{className:`text-lg mb-1 text-center font-bold ${"light"===W?"text-slate-900":"text-slate-100"}`,children:el}),$&&(0,t.jsx)("p",{className:`text-lg italic font-bold mb-0.5 text-center ${"light"===W?"text-black":"text-white"}`,children:$}),(0,t.jsx)("div",{className:"leading-relaxed whitespace-pre-line text-center",style:{marginBottom:"0",paddingBottom:"0",lineHeight:"1.5"},children:I})]}),!S&&!I&&(0,t.jsx)("div",{className:`text-center py-4 ${"light"===W?"text-slate-600":"text-slate-400"}`,children:(0,t.jsx)("p",{children:"No compatibility information available"})})]})})]}),(L||F||U||M||R||O||B||H)&&(0,t.jsxs)("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:Z?"none":`1px solid ${"light"===W?"#e2e8f0":"#334155"}`},children:[L&&(0,t.jsxs)("div",{style:{marginBottom:"1.5rem",marginTop:"0"},children:[(0,t.jsx)("h4",{className:"text-lg font-semibold mb-0.5",style:{background:`linear-gradient(135deg, ${eh.start}, ${eh.end})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",paddingLeft:"1rem",paddingRight:"1rem"},children:"About me"}),(0,t.jsx)("p",{className:`text-2xl font-bold leading-relaxed whitespace-pre-wrap ${"light"===W?"text-slate-700":"text-slate-300"}`,style:{paddingLeft:"1rem",paddingRight:"1rem"},children:L})]}),F&&(0,t.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,t.jsx)("h4",{className:"text-lg font-semibold mb-0.5",style:{background:`linear-gradient(135deg, ${eh.start}, ${eh.end})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",paddingLeft:"1rem",paddingRight:"1rem"},children:"Relationship Goals"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",style:{paddingLeft:"1rem",paddingRight:"1rem"},children:"string"==typeof F?(0,t.jsx)("span",{className:"px-3 py-1.5 rounded-full text-base font-medium text-white",style:{background:"linear-gradient(135deg, #f472b6 0%, #d946ef 100%)",boxShadow:"0 4px 15px rgba(236, 72, 153, 0.4)"},children:F}):Array.isArray(F)?F.map((e,i)=>(0,t.jsx)("span",{className:"px-3 py-1.5 rounded-full text-base font-medium text-white",style:{background:"linear-gradient(135deg, #f472b6 0%, #d946ef 100%)",boxShadow:"0 4px 15px rgba(236, 72, 153, 0.4)"},children:e},i)):null})]}),U&&(0,t.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,t.jsx)("h4",{className:"text-lg font-semibold mb-0.5",style:{background:`linear-gradient(135deg, ${eh.start}, ${eh.end})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",paddingLeft:"1rem",paddingRight:"1rem"},children:"Interests"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",style:{paddingLeft:"1rem",paddingRight:"1rem"},children:"string"==typeof U?(0,t.jsx)("span",{className:"px-3 py-1.5 rounded-full text-base font-medium text-white",style:{background:"linear-gradient(135deg, #f472b6 0%, #d946ef 100%)",boxShadow:"0 4px 15px rgba(236, 72, 153, 0.4)"},children:U}):Array.isArray(U)?U.map((e,i)=>(0,t.jsx)("span",{className:"px-3 py-1.5 rounded-full text-base font-medium text-white",style:{background:"linear-gradient(135deg, #f472b6 0%, #d946ef 100%)",boxShadow:"0 4px 15px rgba(236, 72, 153, 0.4)"},children:e},i)):"object"==typeof U?Object.entries(U).flatMap(([e,t])=>Array.isArray(t)?t:[]).map((e,i)=>(0,t.jsx)("span",{className:"px-3 py-1.5 rounded-full text-base font-medium text-white",style:{background:"linear-gradient(135deg, #f472b6 0%, #d946ef 100%)",boxShadow:"0 4px 15px rgba(236, 72, 153, 0.4)"},children:e},i)):null})]}),(M||R||O||B||H)&&(0,t.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,t.jsx)("h4",{className:"text-lg font-semibold mb-0.5",style:{background:`linear-gradient(135deg, ${eh.start}, ${eh.end})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",paddingLeft:"1rem",paddingRight:"1rem"},children:"Essentials"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-3",style:{paddingLeft:"1rem",paddingRight:"1rem"},children:[M&&(0,t.jsxs)("div",{className:`flex items-center gap-1.5 text-xl ${"light"===W?"text-slate-700":"text-slate-300"}`,children:[(0,t.jsxs)("svg",{className:"w-3 h-3 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,t.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,t.jsx)("span",{children:M})]}),R&&(0,t.jsxs)("div",{className:`flex items-center gap-1.5 text-xl ${"light"===W?"text-slate-700":"text-slate-300"}`,children:[(0,t.jsxs)("svg",{className:"w-3 h-3 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),(0,t.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),(0,t.jsx)("span",{children:R})]}),O&&(0,t.jsxs)("div",{className:`flex items-center gap-1.5 text-xl ${"light"===W?"text-slate-700":"text-slate-300"}`,children:[(0,t.jsxs)("svg",{className:"w-3 h-3 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),(0,t.jsxs)("span",{children:[O," years old"]})]}),B&&(0,t.jsxs)("div",{className:`flex items-center gap-1.5 text-xl ${"light"===W?"text-slate-700":"text-slate-300"}`,children:[(0,t.jsxs)("svg",{className:"w-3 h-3 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),(0,t.jsx)("polyline",{points:"8 6 12 2 16 6"}),(0,t.jsx)("polyline",{points:"8 18 12 22 16 18"})]}),(0,t.jsx)("span",{children:B})]}),H&&(0,t.jsxs)("div",{className:`flex items-center gap-1.5 text-xl ${"light"===W?"text-slate-700":"text-slate-300"}`,children:[(0,t.jsxs)("svg",{className:"w-3 h-3 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,t.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,t.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"})]}),(0,t.jsx)("span",{children:H})]})]})]})]})]}),ee&&(S||I)&&(0,t.jsx)("div",{className:`rounded-2xl text-lg relative z-20 ${"light"===W?"text-slate-800":"text-slate-200"}`,style:{backgroundColor:"transparent",marginLeft:"-1rem",marginRight:"-1rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:"1rem",paddingBottom:"1rem",marginTop:"0",marginBottom:"0",borderRadius:"0"}})]})}],70001)},75099,(e,t,i)=>{"use strict";let n;Object.defineProperty(i,"__esModule",{value:!0}),i.parseCookie=u,i.parse=u,i.stringifyCookie=function(e,t){let i=t?.encode||encodeURIComponent,n=[];for(let t of Object.keys(e)){let a=e[t];if(void 0===a)continue;if(!r.test(t))throw TypeError(`cookie name is invalid: ${t}`);let o=i(a);if(!s.test(o))throw TypeError(`cookie val is invalid: ${a}`);n.push(`${t}=${o}`)}return n.join("; ")},i.stringifySetCookie=h,i.serialize=h,i.parseSetCookie=function(e,t){let i=t?.decode||p,n=e.length,r=g(e,0,n),s=m(e,0,r),a=-1===s?{name:"",value:i(f(e,0,r))}:{name:f(e,0,s),value:i(f(e,s+1,r))},o=r+1;for(;o<n;){let t=g(e,o,n),i=m(e,o,t),r=-1===i?f(e,o,t):f(e,o,i),s=-1===i?void 0:f(e,i+1,t);switch(r.toLowerCase()){case"httponly":a.httpOnly=!0;break;case"secure":a.secure=!0;break;case"partitioned":a.partitioned=!0;break;case"domain":a.domain=s;break;case"path":a.path=s;break;case"max-age":s&&l.test(s)&&(a.maxAge=Number(s));break;case"expires":if(!s)break;let c=new Date(s);Number.isFinite(c.valueOf())&&(a.expires=c);break;case"priority":if(!s)break;let d=s.toLowerCase();("low"===d||"medium"===d||"high"===d)&&(a.priority=d);break;case"samesite":if(!s)break;let u=s.toLowerCase();("lax"===u||"strict"===u||"none"===u)&&(a.sameSite=u)}o=t+1}return a},i.stringifySetCookie=h,i.serialize=h;let r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,s=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,l=/^-?\d+$/,c=Object.prototype.toString,d=((n=function(){}).prototype=Object.create(null),n);function u(e,t){let i=new d,n=e.length;if(n<2)return i;let r=t?.decode||p,s=0;do{let t=m(e,s,n);if(-1===t)break;let a=g(e,s,n);if(t>a){s=e.lastIndexOf(";",t-1)+1;continue}let o=f(e,s,t);void 0===i[o]&&(i[o]=r(f(e,t+1,a))),s=a+1}while(s<n)return i}function h(e,t,i){let n="object"==typeof e?e:{...i,name:e,value:String(t)},l=("object"==typeof t?t:i)?.encode||encodeURIComponent;if(!r.test(n.name))throw TypeError(`argument name is invalid: ${n.name}`);let d=n.value?l(n.value):"";if(!s.test(d))throw TypeError(`argument val is invalid: ${n.value}`);let u=n.name+"="+d;if(void 0!==n.maxAge){if(!Number.isInteger(n.maxAge))throw TypeError(`option maxAge is invalid: ${n.maxAge}`);u+="; Max-Age="+n.maxAge}if(n.domain){if(!a.test(n.domain))throw TypeError(`option domain is invalid: ${n.domain}`);u+="; Domain="+n.domain}if(n.path){if(!o.test(n.path))throw TypeError(`option path is invalid: ${n.path}`);u+="; Path="+n.path}if(n.expires){var h;if(h=n.expires,"[object Date]"!==c.call(h)||!Number.isFinite(n.expires.valueOf()))throw TypeError(`option expires is invalid: ${n.expires}`);u+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(u+="; HttpOnly"),n.secure&&(u+="; Secure"),n.partitioned&&(u+="; Partitioned"),n.priority)switch("string"==typeof n.priority?n.priority.toLowerCase():void 0){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${n.sameSite}`)}return u}function g(e,t,i){let n=e.indexOf(";",t);return -1===n?i:n}function m(e,t,i){let n=e.indexOf("=",t);return n<i?n:-1}function f(e,t,i){let n=t,r=i;do{let t=e.charCodeAt(n);if(32!==t&&9!==t)break}while(++n<r)for(;r>n;){let t=e.charCodeAt(r-1);if(32!==t&&9!==t)break;r--}return e.slice(n,r)}function p(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},98740,(e,t,i)=>{},21365,e=>{"use strict";let t;var i=e.i(83125),n=e.i(25594),r=e.i(75099);function s(){return"undefined"!=typeof window&&void 0!==window.document}r.parse,r.serialize;let a={path:"/",sameSite:"lax",httpOnly:!1,maxAge:3456e4},o=/^(.*)[.](0|[1-9][0-9]*)$/;function l(e,t){if(e===t)return!0;let i=e.match(o);return!!i&&i[1]===t}function c(e,t,i){let n=i??3180,r=encodeURIComponent(t);if(r.length<=n)return[{name:e,value:t}];let s=[];for(;r.length>0;){let e=r.slice(0,n),t=e.lastIndexOf("%");t>n-3&&(e=e.slice(0,t));let i="";for(;e.length>0;)try{i=decodeURIComponent(e);break}catch(t){if(t instanceof URIError&&"%"===e.at(-3)&&e.length>3)e=e.slice(0,e.length-3);else throw t}s.push(i),r=r.slice(e.length)}return s.map((t,i)=>({name:`${e}.${i}`,value:t}))}async function d(e,t){let i=await t(e);if(i)return i;let n=[];for(let i=0;;i++){let r=`${e}.${i}`,s=await t(r);if(!s)break;n.push(s)}return n.length>0?n.join(""):null}let u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),h=" 	\n\r=".split(""),g=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<h.length;t+=1)e[h[t].charCodeAt(0)]=-2;for(let t=0;t<u.length;t+=1)e[u[t].charCodeAt(0)]=t;return e})();function m(e){let t=[],i=0,n=0;if(function(e,t){for(let i=0;i<e.length;i+=1){let n=e.charCodeAt(i);if(n>55295&&n<=56319){let t=(n-55296)*1024&65535;n=(e.charCodeAt(i+1)-56320&65535|t)+65536,i+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(n,t)}}(e,e=>{for(i=i<<8|e,n+=8;n>=6;){let e=i>>n-6&63;t.push(u[e]),n-=6}}),n>0)for(i<<=6-n,n=6;n>=6;){let e=i>>n-6&63;t.push(u[e]),n-=6}return t.join("")}function f(e){let t=[],i=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},r=0,s=0;for(let t=0;t<e.length;t+=1){let a=g[e.charCodeAt(t)];if(a>-1)for(r=r<<6|a,s+=6;s>=8;)(function(e,t,i){if(0===t.utf8seq){if(e<=127)return i(e);for(let i=1;i<6;i+=1)if((e>>7-i&1)==0){t.utf8seq=i;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&i(t.codepoint)}})(r>>s-8&255,n,i),s-=8;else if(-2===a)continue;else throw Error(`Invalid Base64-URL character "${e.at(t)}" at position ${t}`)}return t.join("")}let p="base64-";async function x({getAll:e,setAll:t,setItems:i,removedItems:n},r){let s=r.cookieEncoding,o=r.cookieOptions??null,d=await e([...i?Object.keys(i):[],...n?Object.keys(n):[]]),u=d?.map(({name:e})=>e)||[],h=Object.keys(n).flatMap(e=>u.filter(t=>l(t,e))),g=Object.keys(i).flatMap(e=>{let t=new Set(u.filter(t=>l(t,e))),n=i[e];"base64url"===s&&(n=p+m(n));let r=c(e,n);return r.forEach(e=>{t.delete(e.name)}),h.push(...t),r}),f={...a,...o,maxAge:0},x={...a,...o,maxAge:a.maxAge};delete f.name,delete x.name,await t([...h.map(e=>({name:e,value:"",options:f})),...g.map(({name:e,value:t})=>({name:e,value:t,options:x}))])}if(e.i(98740),void 0!==i.default&&i.default.env?.npm_package_name){let e=i.default.env.npm_package_name;["@supabase/auth-helpers-nextjs","@supabase/auth-helpers-react","@supabase/auth-helpers-remix","@supabase/auth-helpers-sveltekit"].includes(e)&&console.warn(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ âš ï¸  IMPORTANT: Package Consolidation Notice                                â•‘
â•‘                                                                            â•‘
â•‘ The ${e.padEnd(35)} package name is deprecated.  â•‘
â•‘                                                                            â•‘
â•‘ You are now using @supabase/ssr - a unified solution for all frameworks.  â•‘
â•‘                                                                            â•‘
â•‘ The auth-helpers packages have been consolidated into @supabase/ssr       â•‘
â•‘ to provide better maintenance and consistent APIs across frameworks.      â•‘
â•‘                                                                            â•‘
â•‘ Please update your package.json to use @supabase/ssr directly:            â•‘
â•‘   npm uninstall ${e.padEnd(42)} â•‘
â•‘   npm install @supabase/ssr                                               â•‘
â•‘                                                                            â•‘
â•‘ For more information, visit:                                              â•‘
â•‘ https://supabase.com/docs/guides/auth/server-side                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    `)}function b(){return function(e,i,o){let u=o?.isSingleton===!0||(!o||!("isSingleton"in o))&&s();if(u&&t)return t;if(!e||!i)throw Error(`@supabase/ssr: Your project's URL and API key are required to create a Supabase client!

Check your Supabase project's API settings to find these values

https://supabase.com/dashboard/project/_/settings/api`);let{storage:h}=function(e,t){let i,n,o=e.cookies??null,u=e.cookieEncoding,h={},g={};if(o)if("get"in o){let e=async e=>{let t=e.flatMap(e=>[e,...Array.from({length:5}).map((t,i)=>`${e}.${i}`)]),i=[];for(let e=0;e<t.length;e+=1){let n=await o.get(t[e]);(n||"string"==typeof n)&&i.push({name:t[e],value:n})}return i};if(i=async t=>await e(t),"set"in o&&"remove"in o)n=async e=>{for(let t=0;t<e.length;t+=1){let{name:i,value:n,options:r}=e[t];n?await o.set(i,n,r):await o.remove(i,r)}};else if(t)n=async()=>{console.warn("@supabase/ssr: createServerClient was configured without set and remove cookie methods, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness. Consider switching to the getAll and setAll cookie methods instead of get, set and remove which are deprecated and can be difficult to use correctly.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring a getAll and setAll cookie method (deprecated: alternatively both get, set and remove can be used)")}else if("getAll"in o)if(i=async()=>await o.getAll(),"setAll"in o)n=o.setAll;else if(t)n=async()=>{console.warn("@supabase/ssr: createServerClient was configured without the setAll cookie method, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring both getAll and setAll cookie methods (deprecated: alternatively both get, set and remove can be used)");else throw Error(`@supabase/ssr: ${t?"createServerClient":"createBrowserClient"} requires configuring getAll and setAll cookie methods (deprecated: alternatively use get, set and remove).${s()?" As this is called in a browser runtime, consider removing the cookies option object to use the document.cookie API automatically.":""}`);else if(!t&&s())i=()=>{let e;return Object.keys(e=(0,r.parse)(document.cookie)).map(t=>({name:t,value:e[t]??""}))},n=e=>{e.forEach(({name:e,value:t,options:i})=>{document.cookie=(0,r.serialize)(e,t,i)})};else if(t)throw Error("@supabase/ssr: createServerClient must be initialized with cookie options that specify getAll and setAll functions (deprecated, not recommended: alternatively use get, set and remove)");else i=()=>[],n=()=>{throw Error("@supabase/ssr: createBrowserClient in non-browser runtimes (including Next.js pre-rendering mode) was not initialized cookie options that specify getAll and setAll functions (deprecated: alternatively use get, set and remove), but they were needed")};return t?{getAll:i,setAll:n,setItems:h,removedItems:g,storage:{isServer:!0,getItem:async e=>{if("string"==typeof h[e])return h[e];if(g[e])return null;let t=await i([e]),n=await d(e,async e=>{let i=t?.find(({name:t})=>t===e)||null;return i?i.value:null});if(!n)return null;let r=n;return"string"==typeof n&&n.startsWith(p)&&(r=f(n.substring(p.length))),r},setItem:async(t,r)=>{t.endsWith("-code-verifier")&&await x({getAll:i,setAll:n,setItems:{[t]:r},removedItems:{}},{cookieOptions:e?.cookieOptions??null,cookieEncoding:u}),h[t]=r,delete g[t]},removeItem:async e=>{delete h[e],g[e]=!0}}}:{getAll:i,setAll:n,setItems:h,removedItems:g,storage:{isServer:!1,getItem:async e=>{let t=await i([e]),n=await d(e,async e=>{let i=t?.find(({name:t})=>t===e)||null;return i?i.value:null});if(!n)return null;let r=n;return n.startsWith(p)&&(r=f(n.substring(p.length))),r},setItem:async(t,r)=>{let s=await i([t]),o=new Set((s?.map(({name:e})=>e)||[]).filter(e=>l(e,t))),d=r;"base64url"===u&&(d=p+m(r));let h=c(t,d);h.forEach(({name:e})=>{o.delete(e)});let g={...a,...e?.cookieOptions,maxAge:0},f={...a,...e?.cookieOptions,maxAge:a.maxAge};delete g.name,delete f.name;let x=[...[...o].map(e=>({name:e,value:"",options:g})),...h.map(({name:e,value:t})=>({name:e,value:t,options:f}))];x.length>0&&await n(x)},removeItem:async t=>{let r=await i([t]),s=(r?.map(({name:e})=>e)||[]).filter(e=>l(e,t)),o={...a,...e?.cookieOptions,maxAge:0};delete o.name,s.length>0&&await n(s.map(e=>({name:e,value:"",options:o})))}}}}({...o,cookieEncoding:o?.cookieEncoding??"base64url"},!1),g=(0,n.createClient)(e,i,{...o,global:{...o?.global,headers:{...o?.global?.headers,"X-Client-Info":"supabase-ssr/0.8.0 createBrowserClient"}},auth:{...o?.auth,...o?.cookieOptions?.name?{storageKey:o.cookieOptions.name}:null,flowType:"pkce",autoRefreshToken:s(),detectSessionInUrl:s(),persistSession:!0,storage:h,...o?.cookies&&"encode"in o.cookies&&"tokens-only"===o.cookies.encode?{userStorage:o?.auth?.userStorage??window.localStorage}:null}});return u&&(t=g),g}("https://umorkbxikucjlluzezhq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVtb3JrYnhpa3VjamxsdXplemhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyMzI5MDUsImV4cCI6MjA3NTgwODkwNX0.23X_5s8diNiS00tPZfYXjrii9lJ6IYLmL6JNbdGrW9k",{cookies:{getAll(){let e=[];return"undefined"!=typeof document&&document.cookie&&document.cookie.split(";").forEach(t=>{let i=t.trim().split("=");if(i.length>=2){let t=i[0].trim(),n=i.slice(1).join("=");t&&e.push({name:t,value:n})}}),e},setAll(e){e.forEach(({name:e,value:t,options:i})=>{if("undefined"==typeof document||i?.httpOnly)return;let n=`${e}=${t}`;n+=`; path=${i?.path||"/"}`,i?.maxAge!==void 0&&(n+=`; max-age=${i.maxAge}`),i?.sameSite&&(n+=`; samesite=${i.sameSite}`),i?.secure&&"https:"===window.location.protocol&&(n+="; secure"),document.cookie=n})}}})}e.s(["createClient",()=>b],21365)},43881,e=>{"use strict";var t=e.i(21365);async function i(e){let i=(0,t.createClient)();try{console.log("[Profile Queries] Fetching profiles with filters:",{userId:e.userId,userLat:e.userLat,userLon:e.userLon,radius:e.distanceRadius,lookingForGender:e.lookingForGender,ageRange:`${e.ageMin}-${e.ageMax}`});let{data:t,error:n}=await i.rpc("profiles_within_radius",{user_lat:e.userLat,user_lon:e.userLon,radius_km:e.distanceRadius});if(n)return console.error("[Profile Queries] Error fetching nearby profiles:",n),[];if(console.log(`[Profile Queries] Found ${t?.length||0} profiles within radius`),!t||0===t.length)return console.log("[Profile Queries] No profiles found within radius"),[];let r=0,s=t.filter(t=>{if(t.id===e.userId)return r++,console.log(`[Profile Queries] Filtered out own profile: ${t.email||t.id}`),!1;if(!t.profile_complete||!t.account_active)return r++,console.log(`[Profile Queries] Filtered out incomplete/inactive: ${t.email||t.id} (complete: ${t.profile_complete}, active: ${t.account_active})`),!1;if("Everyone"!==e.lookingForGender){let i=t.gender?.toLowerCase()||"",n=e.lookingForGender.toLowerCase();if("everyone"!==n&&i!==n&&("men"!==n||"man"!==i&&"male"!==i)&&("women"!==n||"woman"!==i&&"female"!==i)&&("man"!==n||"man"!==i&&"male"!==i)&&("woman"!==n||"woman"!==i&&"female"!==i))return r++,console.log(`[Profile Queries] Filtered out gender mismatch: ${t.email||t.id} (profile: ${t.gender}, looking for: ${e.lookingForGender})`),!1}return t.age<e.ageMin||t.age>e.ageMax?(r++,console.log(`[Profile Queries] Filtered out age: ${t.email||t.id} (age: ${t.age}, range: ${e.ageMin}-${e.ageMax})`),!1):t.birthdate&&t.western_sign&&t.chinese_sign?t.photos&&0!==t.photos.length?(console.log(`[Profile Queries] âœ… Profile passed all filters: ${t.email||t.id}`),!0):(r++,console.log(`[Profile Queries] Filtered out no photos: ${t.email||t.id}`),!1):(r++,console.log(`[Profile Queries] Filtered out missing fields: ${t.email||t.id} (birthdate: ${!!t.birthdate}, western: ${!!t.western_sign}, chinese: ${!!t.chinese_sign})`),!1)});console.log(`[Profile Queries] After filtering: ${s.length} matchable profiles (filtered out ${r})`);let a=s.map(e=>({id:e.id,name:e.display_name||"Anonymous",age:e.age,birthdate:e.birthdate,westernSign:e.western_sign,easternSign:e.chinese_sign,tropicalWesternSign:e.tropical_western_sign||e.western_sign,siderealWesternSign:e.sidereal_western_sign||e.western_sign,photos:e.photos||[],bio:e.bio,occupation:e.occupation,height:e.height,religion:e.religion,children_preference:e.children_preference,city:e.city||e.location_name,distance:e.distance_km?Math.round(e.distance_km):void 0,interests:e.interests||[],relationship_goals:e.relationship_goals||[],gender:e.gender,lat:e.lat,lon:e.lon}));return console.log(`[Profile Queries] Found ${a.length} matchable profiles`),a}catch(e){return console.error("[Profile Queries] Unexpected error:",e),[]}}async function n(e){let i=(0,t.createClient)(),{data:n,error:r}=await i.from("likes").select("liked_id").eq("liker_id",e);return r?(console.error("[Profile Queries] Error fetching likes:",r),[]):n?.map(e=>e.liked_id)||[]}async function r(e){let i=(0,t.createClient)(),{data:n,error:r}=await i.from("passes").select("passed_id").eq("passer_id",e).gt("expires_at",new Date().toISOString());return r?(console.error("[Profile Queries] Error fetching passes:",r),[]):n?.map(e=>e.passed_id)||[]}async function s(e){let i=(0,t.createClient)();if(!e){let{data:{user:t}}=await i.auth.getUser();if(!t)return null;e=t.id}console.log("[Profile Queries] Fetching profile for userId:",e);let{data:n,error:r}=await i.from("profiles").select("*").eq("id",e).maybeSingle();return(console.log("[Profile Queries] Query result:",{hasData:!!n,hasError:!!r,errorCode:r?.code,errorMessage:r?.message}),r)?(console.error("[Profile Queries] Error fetching user profile:",r),null):(n||console.warn("[Profile Queries] No profile data returned for userId:",e),n)}async function a(e){let i=(0,t.createClient)(),{data:n,error:r}=await i.from("matches").select(`
      *,
      user1:profiles!matches_user1_id_fkey(id, display_name, photos, western_sign, chinese_sign),
      user2:profiles!matches_user2_id_fkey(id, display_name, photos, western_sign, chinese_sign)
    `).or(`user1_id.eq.${e},user2_id.eq.${e}`).eq("is_active",!0).order("last_message_at",{ascending:!1,nullsFirst:!1});return r?(console.error("[Profile Queries] Error fetching matches:",r),[]):n?.map(t=>{let i=t.user1_id===e?t.user2:t.user1;return{...t,profile:i}})||[]}async function o(e,i){let n=(0,t.createClient)(),{data:r,error:s}=await n.from("matches").select("*").eq("user1_id",e).eq("user2_id",i).eq("is_active",!0).maybeSingle();if(s&&console.error("[Profile Queries] Error finding match (order 1):",s),r)return r;let{data:a,error:o}=await n.from("matches").select("*").eq("user1_id",i).eq("user2_id",e).eq("is_active",!0).maybeSingle();return o&&console.error("[Profile Queries] Error finding match (order 2):",o),a||null}async function l(e){let i=(0,t.createClient)();await i.from("profiles").update({last_active:new Date().toISOString()}).eq("id",e)}function c(e,t,i){let n=new Set([...t,...i]);return e.filter(e=>!n.has(e.id))}e.s(["fetchLikedProfileIds",()=>n,"fetchMatchableProfiles",()=>i,"fetchPassedProfileIds",()=>r,"fetchUserMatches",()=>a,"fetchUserProfile",()=>s,"filterSeenProfiles",()=>c,"findMatchBetweenUsers",()=>o,"updateLastActive",()=>l])},82486,e=>{"use strict";var t=e.i(4671),i=e.i(52998);function n({tier:e,label:n}){let r=i.TIER_THEME[e],s=n??i.TIER_LABEL[e];return(0,t.jsx)("span",{className:"inline-flex items-center rounded-full border-2 px-2.5 py-1 text-xs font-medium",style:{color:"inherit",borderColor:r.borderColor,backgroundColor:"transparent"},title:i.TIER_TOOLTIP[e],"aria-label":`${s} â€” ${i.TIER_TOOLTIP[e]}`,children:s})}e.s(["LabelPill",()=>n])},668,e=>{"use strict";var t=e.i(4671),i=e.i(76315);function n({images:e,currentPhotoIndex:n,onPhotoChange:r,className:s="",children:a}){let[o,l]=(0,i.useState)(1),[c,d]=(0,i.useState)(0),[u,h]=(0,i.useState)(0),[g,m]=(0,i.useState)(!1),[f,p]=(0,i.useState)(!1),[x,b]=(0,i.useState)(0),[w,y]=(0,i.useState)({x:0,y:0}),[k,v]=(0,i.useState)({x:0,y:0}),[C,S]=(0,i.useState)({x:0,y:0}),[j,N]=(0,i.useState)(!1),[A,$]=(0,i.useState)(!1),[I,E]=(0,i.useState)(!1),[_,P]=(0,i.useState)(1),[T,L]=(0,i.useState)(0),[O,M]=(0,i.useState)(0),[R,B]=(0,i.useState)(1),[H,U]=(0,i.useState)(!0),F=(0,i.useRef)(null),W=(0,i.useRef)(null),G=(0,i.useRef)(void 0),D=(0,i.useRef)(void 0),X=e.length>1?[e[e.length-1],...e,e[0]]:e;(0,i.useEffect)(()=>{if(e.length<=1)return;let t=n+1;R!==t&&0!==R&&R!==X.length-1&&(U(!0),B(t))},[n,e.length,R,X.length]),(0,i.useEffect)(()=>{if(!(e.length<=1)&&H)return D.current&&window.clearTimeout(D.current),D.current=window.setTimeout(()=>{0===R?(U(!1),B(e.length)):R===X.length-1&&(U(!1),B(1))},300),()=>{D.current&&window.clearTimeout(D.current)}},[R,H,e.length,X.length]),(0,i.useEffect)(()=>{l(1),d(0),h(0),m(!1),$(!1),E(!1),P(1),L(0),M(0)},[n]),(0,i.useEffect)(()=>()=>{G.current&&cancelAnimationFrame(G.current),D.current&&window.clearTimeout(D.current)},[]);let q=(e,t)=>{let i=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(i*i+n*n)},z=(e,t)=>({x:(e.clientX+t.clientX)/2,y:(e.clientY+t.clientY)/2});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{ref:F,className:`relative overflow-hidden ${s}`,onClick:t=>{let i=t.target;i.closest("button")||i.closest("a")||i.closest("[data-interactive]")||i.closest("[data-dropdown-button]")||(t=>{let i=t.target;if(!(i.closest("button")||i.closest("a")||i.closest("[data-dropdown-button]")||i.closest("[data-interactive]"))&&o<=1.05&&!I&&!g){let i=t.currentTarget.getBoundingClientRect(),n=t.clientX-i.left,s=i.width/2;if(e.length<=1)return;if(U(!0),n<s){let t=R-1;B(t),0===t?setTimeout(()=>r(e.length-1),0):r(t-1)}else{let e=R+1;B(e),e===X.length-1?setTimeout(()=>r(0),0):r(e-1)}}})(t)},onTouchStart:e=>{let t=e.target;if(!(t.closest("button")||t.closest("a")||t.closest("[data-interactive]")||t.closest("[data-dropdown-button]"))){let t=e.target;if(!(t.closest("button")||t.closest("a")||t.closest("[data-dropdown-button]")||t.closest("[data-interactive]"))){if(1===e.touches.length){let t=e.touches[0];v({x:t.clientX,y:t.clientY}),S({x:t.clientX,y:t.clientY}),N(!1),p(!0),(o>1.05||I)&&m(!0)}else if(2===e.touches.length){let t=q(e.touches[0],e.touches[1]),i=z(e.touches[0],e.touches[1]);b(t),y(i),p(!1),N(!1),!I&&o<=1.05&&(E(!0),P(1),L(0),M(0)),G.current&&(cancelAnimationFrame(G.current),G.current=void 0)}}}},onTouchMove:e=>{let t=e.target;if(!(t.closest("button")||t.closest("a")||t.closest("[data-dropdown-button]")||t.closest("[data-interactive]"))){if(1===e.touches.length){let t=e.touches[0];if(I){let e=t.clientX-k.x,i=t.clientY-k.y,n=Math.abs(t.clientX-C.x),r=Math.abs(t.clientY-C.y);(n>5||r>5)&&N(!0),L(t=>t+e),M(e=>e+i),v({x:t.clientX,y:t.clientY})}else if(f){let e=t.clientX-k.x,i=t.clientY-k.y,n=Math.abs(t.clientX-C.x),r=Math.abs(t.clientY-C.y);(n>5||r>5)&&N(!0),v({x:t.clientX,y:t.clientY})}}else if(2===e.touches.length){N(!0);let t=q(e.touches[0],e.touches[1]),i=z(e.touches[0],e.touches[1]);if(x>0){let e=t/x*_;e=Math.max(.8,Math.min(6,e));let n=window.innerWidth,r=window.innerHeight,s=i.x,a=i.y,o=e-_;P(e),L(T-(s-n/2)*o),M(O-(a-r/2)*o)}b(t),y(i)}}},onTouchEnd:t=>{let i=t.target;if(!(i.closest("button")||i.closest("a")||i.closest("[data-dropdown-button]")||i.closest("[data-interactive]"))){if(G.current&&(cancelAnimationFrame(G.current),G.current=void 0),0===t.touches.length){if(f&&!g&&!I&&j){let i=t.changedTouches[0],n=i.clientX-C.x;if(Math.abs(n)>Math.abs(i.clientY-C.y)&&Math.abs(n)>50){if(e.length<=1)return;if(U(!0),n>0){let t=R-1;B(t),0===t?setTimeout(()=>r(e.length-1),0):r(t-1)}else{let e=R+1;B(e),e===X.length-1?setTimeout(()=>r(0),0):r(e-1)}}}p(!1),b(0),N(!1),I&&($(!0),E(!1),P(1),L(0),M(0),m(!1),setTimeout(()=>$(!1),2e3))}else if(1===t.touches.length){let e=t.touches[0];v({x:e.clientX,y:e.clientY}),S({x:e.clientX,y:e.clientY}),b(0),N(!1),p(!0)}}},onDoubleClick:e=>{g?(l(1),d(0),h(0),m(!1)):(l(2),m(!0))},onWheel:e=>{let t=o*(e.deltaY>0?.9:1.1);if(t=Math.max(1,Math.min(3,t)),F.current){let i=F.current.getBoundingClientRect(),n=e.clientX-i.left,r=e.clientY-i.top;if(t<=1.2)$(!0),l(1),d(0),h(0),m(!1),setTimeout(()=>$(!1),300);else{let e=t-o,s=c-(n-i.width/2)*e,a=u-(r-i.height/2)*e;l(t),d(s),h(a),m(!0)}}},style:{touchAction:g?"none":"pan-y",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",WebkitTapHighlightColor:"transparent"},children:[(0,t.jsx)("div",{className:"h-full w-full flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${100*R}%)`,transition:H?f?"none":"transform 0.3s ease-in-out":"none"},children:X.map((e,i)=>(0,t.jsxs)("div",{className:"h-full w-full flex-shrink-0 relative",style:{minWidth:"100%"},children:[(0,t.jsx)("img",{ref:i===R?W:null,src:e,alt:`Photo ${i+1}`,className:"h-full w-full object-cover",style:{transform:i===R?`scale(${o}) translate(${c/o}px, ${u/o}px)`:"none",transformOrigin:"center center",transition:A?"transform 0.6s cubic-bezier(0.16, 1, 0.3, 1)":"none",userSelect:"none",pointerEvents:"none",willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",WebkitTransform:"translateZ(0)",opacity:i===R&&I?0:1},draggable:!1}),i===R&&I&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black"})]},i))}),(0,t.jsx)("div",{className:"absolute inset-0",style:{zIndex:100},children:a})]}),I&&(0,t.jsx)("div",{className:"fixed inset-0 bg-transparent z-[9999] flex items-center justify-center",onTouchStart:e=>{if(1===e.touches.length){let t=e.touches[0];v({x:t.clientX,y:t.clientY})}else if(2===e.touches.length){let t=q(e.touches[0],e.touches[1]),i=z(e.touches[0],e.touches[1]);b(t),y(i)}},onTouchMove:e=>{if(2===e.touches.length){let t=q(e.touches[0],e.touches[1]),i=z(e.touches[0],e.touches[1]);if(x>0){let e=_*(1+(t/x-1)*.85);e=Math.max(.8,Math.min(8,e));let n=window.innerWidth,r=window.innerHeight,s=i.x,a=i.y,o=e-_,l=T-(s-n/2)*o,c=O-(a-r/2)*o;G.current&&cancelAnimationFrame(G.current),G.current=requestAnimationFrame(()=>{P(e),L(l),M(c)})}b(t),y(i)}else if(1===e.touches.length){let t=e.touches[0];if(0!==k.x||0!==k.y){let e=t.clientX-k.x,i=t.clientY-k.y;G.current&&cancelAnimationFrame(G.current),G.current=requestAnimationFrame(()=>{L(t=>t+e),M(e=>e+i)})}v({x:t.clientX,y:t.clientY})}},onTouchEnd:e=>{b(0),v({x:0,y:0}),$(!0),E(!1),P(1),L(0),M(0),setTimeout(()=>$(!1),2e3)},onClick:()=>{I&&_<=1.1&&(E(!1),P(1),L(0),M(0))},style:{touchAction:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none"},children:(0,t.jsx)("img",{src:e[n],alt:`Photo ${n+1}`,className:"object-contain",style:{maxWidth:"100vw",maxHeight:"100vh",transform:`scale(${_}) translate(${T/_}px, ${O/_}px)`,transformOrigin:"center center",transition:A?"transform 0.6s cubic-bezier(0.16, 1, 0.3, 1)":"none",userSelect:"none",pointerEvents:"none",willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",touchAction:"none"},draggable:!1})})]})}e.s(["default",()=>n])},48433,e=>{"use strict";let t=["Rat","Ox","Tiger","Rabbit","Dragon","Snake","Horse","Goat","Monkey","Rooster","Dog","Pig"];function i(e){let i=e.getFullYear();return{animal:t[((i-4)%12+12)%12],element:function(e){switch(Math.floor(((e-4)%10+10)%10/2)){case 0:return"Wood";case 1:return"Fire";case 2:return"Earth";case 3:return"Metal";default:return"Water"}}(i)}}e.s(["getChineseZodiacFromDate",()=>i])}]);