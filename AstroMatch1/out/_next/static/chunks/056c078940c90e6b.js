(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75099,(e,t,r)=>{"use strict";let i;Object.defineProperty(r,"__esModule",{value:!0}),r.parseCookie=u,r.parse=u,r.stringifyCookie=function(e,t){let r=t?.encode||encodeURIComponent,i=[];for(let t of Object.keys(e)){let a=e[t];if(void 0===a)continue;if(!o.test(t))throw TypeError(`cookie name is invalid: ${t}`);let n=r(a);if(!s.test(n))throw TypeError(`cookie val is invalid: ${a}`);i.push(`${t}=${n}`)}return i.join("; ")},r.stringifySetCookie=h,r.serialize=h,r.parseSetCookie=function(e,t){let r=t?.decode||g,i=e.length,o=f(e,0,i),s=m(e,0,o),a=-1===s?{name:"",value:r(p(e,0,o))}:{name:p(e,0,s),value:r(p(e,s+1,o))},n=o+1;for(;n<i;){let t=f(e,n,i),r=m(e,n,t),o=-1===r?p(e,n,t):p(e,n,r),s=-1===r?void 0:p(e,r+1,t);switch(o.toLowerCase()){case"httponly":a.httpOnly=!0;break;case"secure":a.secure=!0;break;case"partitioned":a.partitioned=!0;break;case"domain":a.domain=s;break;case"path":a.path=s;break;case"max-age":s&&l.test(s)&&(a.maxAge=Number(s));break;case"expires":if(!s)break;let c=new Date(s);Number.isFinite(c.valueOf())&&(a.expires=c);break;case"priority":if(!s)break;let d=s.toLowerCase();("low"===d||"medium"===d||"high"===d)&&(a.priority=d);break;case"samesite":if(!s)break;let u=s.toLowerCase();("lax"===u||"strict"===u||"none"===u)&&(a.sameSite=u)}n=t+1}return a},r.stringifySetCookie=h,r.serialize=h;let o=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,s=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,l=/^-?\d+$/,c=Object.prototype.toString,d=((i=function(){}).prototype=Object.create(null),i);function u(e,t){let r=new d,i=e.length;if(i<2)return r;let o=t?.decode||g,s=0;do{let t=m(e,s,i);if(-1===t)break;let a=f(e,s,i);if(t>a){s=e.lastIndexOf(";",t-1)+1;continue}let n=p(e,s,t);void 0===r[n]&&(r[n]=o(p(e,t+1,a))),s=a+1}while(s<i)return r}function h(e,t,r){let i="object"==typeof e?e:{...r,name:e,value:String(t)},l=("object"==typeof t?t:r)?.encode||encodeURIComponent;if(!o.test(i.name))throw TypeError(`argument name is invalid: ${i.name}`);let d=i.value?l(i.value):"";if(!s.test(d))throw TypeError(`argument val is invalid: ${i.value}`);let u=i.name+"="+d;if(void 0!==i.maxAge){if(!Number.isInteger(i.maxAge))throw TypeError(`option maxAge is invalid: ${i.maxAge}`);u+="; Max-Age="+i.maxAge}if(i.domain){if(!a.test(i.domain))throw TypeError(`option domain is invalid: ${i.domain}`);u+="; Domain="+i.domain}if(i.path){if(!n.test(i.path))throw TypeError(`option path is invalid: ${i.path}`);u+="; Path="+i.path}if(i.expires){var h;if(h=i.expires,"[object Date]"!==c.call(h)||!Number.isFinite(i.expires.valueOf()))throw TypeError(`option expires is invalid: ${i.expires}`);u+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(u+="; HttpOnly"),i.secure&&(u+="; Secure"),i.partitioned&&(u+="; Partitioned"),i.priority)switch("string"==typeof i.priority?i.priority.toLowerCase():void 0){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${i.priority}`)}if(i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${i.sameSite}`)}return u}function f(e,t,r){let i=e.indexOf(";",t);return -1===i?r:i}function m(e,t,r){let i=e.indexOf("=",t);return i<r?i:-1}function p(e,t,r){let i=t,o=r;do{let t=e.charCodeAt(i);if(32!==t&&9!==t)break}while(++i<o)for(;o>i;){let t=e.charCodeAt(o-1);if(32!==t&&9!==t)break;o--}return e.slice(i,o)}function g(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},98740,(e,t,r)=>{},21365,e=>{"use strict";let t;var r=e.i(83125),i=e.i(25594),o=e.i(75099);function s(){return"undefined"!=typeof window&&void 0!==window.document}o.parse,o.serialize;let a={path:"/",sameSite:"lax",httpOnly:!1,maxAge:3456e4},n=/^(.*)[.](0|[1-9][0-9]*)$/;function l(e,t){if(e===t)return!0;let r=e.match(n);return!!r&&r[1]===t}function c(e,t,r){let i=r??3180,o=encodeURIComponent(t);if(o.length<=i)return[{name:e,value:t}];let s=[];for(;o.length>0;){let e=o.slice(0,i),t=e.lastIndexOf("%");t>i-3&&(e=e.slice(0,t));let r="";for(;e.length>0;)try{r=decodeURIComponent(e);break}catch(t){if(t instanceof URIError&&"%"===e.at(-3)&&e.length>3)e=e.slice(0,e.length-3);else throw t}s.push(r),o=o.slice(e.length)}return s.map((t,r)=>({name:`${e}.${r}`,value:t}))}async function d(e,t){let r=await t(e);if(r)return r;let i=[];for(let r=0;;r++){let o=`${e}.${r}`,s=await t(o);if(!s)break;i.push(s)}return i.length>0?i.join(""):null}let u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),h=" 	\n\r=".split(""),f=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<h.length;t+=1)e[h[t].charCodeAt(0)]=-2;for(let t=0;t<u.length;t+=1)e[u[t].charCodeAt(0)]=t;return e})();function m(e){let t=[],r=0,i=0;if(function(e,t){for(let r=0;r<e.length;r+=1){let i=e.charCodeAt(r);if(i>55295&&i<=56319){let t=(i-55296)*1024&65535;i=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(i,t)}}(e,e=>{for(r=r<<8|e,i+=8;i>=6;){let e=r>>i-6&63;t.push(u[e]),i-=6}}),i>0)for(r<<=6-i,i=6;i>=6;){let e=r>>i-6&63;t.push(u[e]),i-=6}return t.join("")}function p(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},i={utf8seq:0,codepoint:0},o=0,s=0;for(let t=0;t<e.length;t+=1){let a=f[e.charCodeAt(t)];if(a>-1)for(o=o<<6|a,s+=6;s>=8;)(function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}})(o>>s-8&255,i,r),s-=8;else if(-2===a)continue;else throw Error(`Invalid Base64-URL character "${e.at(t)}" at position ${t}`)}return t.join("")}let g="base64-";async function b({getAll:e,setAll:t,setItems:r,removedItems:i},o){let s=o.cookieEncoding,n=o.cookieOptions??null,d=await e([...r?Object.keys(r):[],...i?Object.keys(i):[]]),u=d?.map(({name:e})=>e)||[],h=Object.keys(i).flatMap(e=>u.filter(t=>l(t,e))),f=Object.keys(r).flatMap(e=>{let t=new Set(u.filter(t=>l(t,e))),i=r[e];"base64url"===s&&(i=g+m(i));let o=c(e,i);return o.forEach(e=>{t.delete(e.name)}),h.push(...t),o}),p={...a,...n,maxAge:0},b={...a,...n,maxAge:a.maxAge};delete p.name,delete b.name,await t([...h.map(e=>({name:e,value:"",options:p})),...f.map(({name:e,value:t})=>({name:e,value:t,options:b}))])}if(e.i(98740),void 0!==r.default&&r.default.env?.npm_package_name){let e=r.default.env.npm_package_name;["@supabase/auth-helpers-nextjs","@supabase/auth-helpers-react","@supabase/auth-helpers-remix","@supabase/auth-helpers-sveltekit"].includes(e)&&console.warn(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ âš ï¸  IMPORTANT: Package Consolidation Notice                                â•‘
â•‘                                                                            â•‘
â•‘ The ${e.padEnd(35)} package name is deprecated.  â•‘
â•‘                                                                            â•‘
â•‘ You are now using @supabase/ssr - a unified solution for all frameworks.  â•‘
â•‘                                                                            â•‘
â•‘ The auth-helpers packages have been consolidated into @supabase/ssr       â•‘
â•‘ to provide better maintenance and consistent APIs across frameworks.      â•‘
â•‘                                                                            â•‘
â•‘ Please update your package.json to use @supabase/ssr directly:            â•‘
â•‘   npm uninstall ${e.padEnd(42)} â•‘
â•‘   npm install @supabase/ssr                                               â•‘
â•‘                                                                            â•‘
â•‘ For more information, visit:                                              â•‘
â•‘ https://supabase.com/docs/guides/auth/server-side                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    `)}function w(){return function(e,r,n){let u=n?.isSingleton===!0||(!n||!("isSingleton"in n))&&s();if(u&&t)return t;if(!e||!r)throw Error(`@supabase/ssr: Your project's URL and API key are required to create a Supabase client!

Check your Supabase project's API settings to find these values

https://supabase.com/dashboard/project/_/settings/api`);let{storage:h}=function(e,t){let r,i,n=e.cookies??null,u=e.cookieEncoding,h={},f={};if(n)if("get"in n){let e=async e=>{let t=e.flatMap(e=>[e,...Array.from({length:5}).map((t,r)=>`${e}.${r}`)]),r=[];for(let e=0;e<t.length;e+=1){let i=await n.get(t[e]);(i||"string"==typeof i)&&r.push({name:t[e],value:i})}return r};if(r=async t=>await e(t),"set"in n&&"remove"in n)i=async e=>{for(let t=0;t<e.length;t+=1){let{name:r,value:i,options:o}=e[t];i?await n.set(r,i,o):await n.remove(r,o)}};else if(t)i=async()=>{console.warn("@supabase/ssr: createServerClient was configured without set and remove cookie methods, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness. Consider switching to the getAll and setAll cookie methods instead of get, set and remove which are deprecated and can be difficult to use correctly.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring a getAll and setAll cookie method (deprecated: alternatively both get, set and remove can be used)")}else if("getAll"in n)if(r=async()=>await n.getAll(),"setAll"in n)i=n.setAll;else if(t)i=async()=>{console.warn("@supabase/ssr: createServerClient was configured without the setAll cookie method, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring both getAll and setAll cookie methods (deprecated: alternatively both get, set and remove can be used)");else throw Error(`@supabase/ssr: ${t?"createServerClient":"createBrowserClient"} requires configuring getAll and setAll cookie methods (deprecated: alternatively use get, set and remove).${s()?" As this is called in a browser runtime, consider removing the cookies option object to use the document.cookie API automatically.":""}`);else if(!t&&s())r=()=>{let e;return Object.keys(e=(0,o.parse)(document.cookie)).map(t=>({name:t,value:e[t]??""}))},i=e=>{e.forEach(({name:e,value:t,options:r})=>{document.cookie=(0,o.serialize)(e,t,r)})};else if(t)throw Error("@supabase/ssr: createServerClient must be initialized with cookie options that specify getAll and setAll functions (deprecated, not recommended: alternatively use get, set and remove)");else r=()=>[],i=()=>{throw Error("@supabase/ssr: createBrowserClient in non-browser runtimes (including Next.js pre-rendering mode) was not initialized cookie options that specify getAll and setAll functions (deprecated: alternatively use get, set and remove), but they were needed")};return t?{getAll:r,setAll:i,setItems:h,removedItems:f,storage:{isServer:!0,getItem:async e=>{if("string"==typeof h[e])return h[e];if(f[e])return null;let t=await r([e]),i=await d(e,async e=>{let r=t?.find(({name:t})=>t===e)||null;return r?r.value:null});if(!i)return null;let o=i;return"string"==typeof i&&i.startsWith(g)&&(o=p(i.substring(g.length))),o},setItem:async(t,o)=>{t.endsWith("-code-verifier")&&await b({getAll:r,setAll:i,setItems:{[t]:o},removedItems:{}},{cookieOptions:e?.cookieOptions??null,cookieEncoding:u}),h[t]=o,delete f[t]},removeItem:async e=>{delete h[e],f[e]=!0}}}:{getAll:r,setAll:i,setItems:h,removedItems:f,storage:{isServer:!1,getItem:async e=>{let t=await r([e]),i=await d(e,async e=>{let r=t?.find(({name:t})=>t===e)||null;return r?r.value:null});if(!i)return null;let o=i;return i.startsWith(g)&&(o=p(i.substring(g.length))),o},setItem:async(t,o)=>{let s=await r([t]),n=new Set((s?.map(({name:e})=>e)||[]).filter(e=>l(e,t))),d=o;"base64url"===u&&(d=g+m(o));let h=c(t,d);h.forEach(({name:e})=>{n.delete(e)});let f={...a,...e?.cookieOptions,maxAge:0},p={...a,...e?.cookieOptions,maxAge:a.maxAge};delete f.name,delete p.name;let b=[...[...n].map(e=>({name:e,value:"",options:f})),...h.map(({name:e,value:t})=>({name:e,value:t,options:p}))];b.length>0&&await i(b)},removeItem:async t=>{let o=await r([t]),s=(o?.map(({name:e})=>e)||[]).filter(e=>l(e,t)),n={...a,...e?.cookieOptions,maxAge:0};delete n.name,s.length>0&&await i(s.map(e=>({name:e,value:"",options:n})))}}}}({...n,cookieEncoding:n?.cookieEncoding??"base64url"},!1),f=(0,i.createClient)(e,r,{...n,global:{...n?.global,headers:{...n?.global?.headers,"X-Client-Info":"supabase-ssr/0.8.0 createBrowserClient"}},auth:{...n?.auth,...n?.cookieOptions?.name?{storageKey:n.cookieOptions.name}:null,flowType:"pkce",autoRefreshToken:s(),detectSessionInUrl:s(),persistSession:!0,storage:h,...n?.cookies&&"encode"in n.cookies&&"tokens-only"===n.cookies.encode?{userStorage:n?.auth?.userStorage??window.localStorage}:null}});return u&&(t=f),f}("https://umorkbxikucjlluzezhq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVtb3JrYnhpa3VjamxsdXplemhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyMzI5MDUsImV4cCI6MjA3NTgwODkwNX0.23X_5s8diNiS00tPZfYXjrii9lJ6IYLmL6JNbdGrW9k",{cookies:{getAll(){let e=[];return"undefined"!=typeof document&&document.cookie&&document.cookie.split(";").forEach(t=>{let r=t.trim().split("=");if(r.length>=2){let t=r[0].trim(),i=r.slice(1).join("=");t&&e.push({name:t,value:i})}}),e},setAll(e){e.forEach(({name:e,value:t,options:r})=>{if("undefined"==typeof document||r?.httpOnly)return;let i=`${e}=${t}`;i+=`; path=${r?.path||"/"}`,r?.maxAge!==void 0&&(i+=`; max-age=${r.maxAge}`),r?.sameSite&&(i+=`; samesite=${r.sameSite}`),r?.secure&&"https:"===window.location.protocol&&(i+="; secure"),document.cookie=i})}}})}e.s(["createClient",()=>w],21365)},43881,e=>{"use strict";var t=e.i(21365);async function r(e){let r=(0,t.createClient)();try{console.log("[Profile Queries] Fetching profiles with filters:",{userId:e.userId,userLat:e.userLat,userLon:e.userLon,radius:e.distanceRadius,lookingForGender:e.lookingForGender,ageRange:`${e.ageMin}-${e.ageMax}`});let{data:t,error:i}=await r.rpc("profiles_within_radius",{user_lat:e.userLat,user_lon:e.userLon,radius_km:e.distanceRadius});if(i)return console.error("[Profile Queries] Error fetching nearby profiles:",i),[];if(console.log(`[Profile Queries] Found ${t?.length||0} profiles within radius`),!t||0===t.length)return console.log("[Profile Queries] No profiles found within radius"),[];let o=0,s=t.filter(t=>{if(t.id===e.userId)return o++,console.log(`[Profile Queries] Filtered out own profile: ${t.email||t.id}`),!1;if(!t.profile_complete||!t.account_active)return o++,console.log(`[Profile Queries] Filtered out incomplete/inactive: ${t.email||t.id} (complete: ${t.profile_complete}, active: ${t.account_active})`),!1;if("Everyone"!==e.lookingForGender){let r=t.gender?.toLowerCase()||"",i=e.lookingForGender.toLowerCase();if("everyone"!==i&&r!==i&&("men"!==i||"man"!==r&&"male"!==r)&&("women"!==i||"woman"!==r&&"female"!==r)&&("man"!==i||"man"!==r&&"male"!==r)&&("woman"!==i||"woman"!==r&&"female"!==r))return o++,console.log(`[Profile Queries] Filtered out gender mismatch: ${t.email||t.id} (profile: ${t.gender}, looking for: ${e.lookingForGender})`),!1}return t.age<e.ageMin||t.age>e.ageMax?(o++,console.log(`[Profile Queries] Filtered out age: ${t.email||t.id} (age: ${t.age}, range: ${e.ageMin}-${e.ageMax})`),!1):t.birthdate&&t.western_sign&&t.chinese_sign?t.photos&&0!==t.photos.length?(console.log(`[Profile Queries] âœ… Profile passed all filters: ${t.email||t.id}`),!0):(o++,console.log(`[Profile Queries] Filtered out no photos: ${t.email||t.id}`),!1):(o++,console.log(`[Profile Queries] Filtered out missing fields: ${t.email||t.id} (birthdate: ${!!t.birthdate}, western: ${!!t.western_sign}, chinese: ${!!t.chinese_sign})`),!1)});console.log(`[Profile Queries] After filtering: ${s.length} matchable profiles (filtered out ${o})`);let a=s.map(e=>({id:e.id,name:e.display_name||"Anonymous",age:e.age,birthdate:e.birthdate,westernSign:e.western_sign,easternSign:e.chinese_sign,tropicalWesternSign:e.tropical_western_sign||e.western_sign,siderealWesternSign:e.sidereal_western_sign||e.western_sign,photos:e.photos||[],bio:e.bio,occupation:e.occupation,height:e.height,religion:e.religion,children_preference:e.children_preference,city:e.city||e.location_name,distance:e.distance_km?Math.round(e.distance_km):void 0,interests:e.interests||[],relationship_goals:e.relationship_goals||[],gender:e.gender,lat:e.lat,lon:e.lon}));return console.log(`[Profile Queries] Found ${a.length} matchable profiles`),a}catch(e){return console.error("[Profile Queries] Unexpected error:",e),[]}}async function i(e){let r=(0,t.createClient)(),{data:i,error:o}=await r.from("likes").select("liked_id").eq("liker_id",e);return o?(console.error("[Profile Queries] Error fetching likes:",o),[]):i?.map(e=>e.liked_id)||[]}async function o(e){let r=(0,t.createClient)(),{data:i,error:o}=await r.from("passes").select("passed_id").eq("passer_id",e).gt("expires_at",new Date().toISOString());return o?(console.error("[Profile Queries] Error fetching passes:",o),[]):i?.map(e=>e.passed_id)||[]}async function s(e){let r=(0,t.createClient)();if(!e){let{data:{user:t}}=await r.auth.getUser();if(!t)return null;e=t.id}console.log("[Profile Queries] Fetching profile for userId:",e);let{data:i,error:o}=await r.from("profiles").select("*").eq("id",e).maybeSingle();return(console.log("[Profile Queries] Query result:",{hasData:!!i,hasError:!!o,errorCode:o?.code,errorMessage:o?.message}),o)?(console.error("[Profile Queries] Error fetching user profile:",o),null):(i||console.warn("[Profile Queries] No profile data returned for userId:",e),i)}async function a(e){let r=(0,t.createClient)(),{data:i,error:o}=await r.from("matches").select(`
      *,
      user1:profiles!matches_user1_id_fkey(id, display_name, photos, western_sign, chinese_sign),
      user2:profiles!matches_user2_id_fkey(id, display_name, photos, western_sign, chinese_sign)
    `).or(`user1_id.eq.${e},user2_id.eq.${e}`).eq("is_active",!0).order("last_message_at",{ascending:!1,nullsFirst:!1});return o?(console.error("[Profile Queries] Error fetching matches:",o),[]):i?.map(t=>{let r=t.user1_id===e?t.user2:t.user1;return{...t,profile:r}})||[]}async function n(e,r){let i=(0,t.createClient)(),{data:o,error:s}=await i.from("matches").select("*").eq("user1_id",e).eq("user2_id",r).eq("is_active",!0).maybeSingle();if(s&&console.error("[Profile Queries] Error finding match (order 1):",s),o)return o;let{data:a,error:n}=await i.from("matches").select("*").eq("user1_id",r).eq("user2_id",e).eq("is_active",!0).maybeSingle();return n&&console.error("[Profile Queries] Error finding match (order 2):",n),a||null}async function l(e){let r=(0,t.createClient)();await r.from("profiles").update({last_active:new Date().toISOString()}).eq("id",e)}function c(e,t,r){let i=new Set([...t,...r]);return e.filter(e=>!i.has(e.id))}e.s(["fetchLikedProfileIds",()=>i,"fetchMatchableProfiles",()=>r,"fetchPassedProfileIds",()=>o,"fetchUserMatches",()=>a,"fetchUserProfile",()=>s,"filterSeenProfiles",()=>c,"findMatchBetweenUsers",()=>n,"updateLastActive",()=>l])},25028,e=>{"use strict";function t(e){if(!e)return{isComplete:!1,percentage:0,missingFields:["All fields"],requiredFields:{hasName:!1,hasBirthdate:!1,hasPhotos:!1,minPhotos:0}};let t={hasName:!!(e.display_name&&e.display_name.length>0),hasBirthdate:!!e.birthdate,hasPhotos:(e.photos?.length??0)>=1,minPhotos:e.photos?.length??0},r=[];t.hasName||r.push("Name"),t.hasBirthdate||r.push("Birthdate"),t.hasPhotos||r.push("At least 1 photo");let i=[t.hasName,t.hasBirthdate,t.hasPhotos];return{isComplete:0===r.length,percentage:Math.round(i.filter(e=>!0===e).length/i.length*100),missingFields:r,requiredFields:t}}function r(e){return e.isComplete?"âœ… Your profile is complete!":0===e.percentage?"ðŸš€ Let's set up your profile!":e.percentage<25?`ðŸ“ ${e.percentage}% complete - Let's add more details`:e.percentage<50?`ðŸ“¸ ${e.percentage}% complete - Almost there!`:e.percentage<75?`ðŸŽ¯ ${e.percentage}% complete - You're doing great!`:`ðŸŒŸ ${e.percentage}% complete - Just a few more things!`}e.s(["checkProfileCompletion",()=>t,"getCompletionMessage",()=>r])},19769,e=>{"use strict";var t=e.i(4671),r=e.i(76315),i=e.i(69024),o=e.i(56219),s=e.i(43881),a=e.i(25028);function n(){let e=(0,i.useRouter)(),{theme:n}=(0,o.useTheme)(),[l,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),[h,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{m()},[]);let m=async()=>{c(!0);let t=await (0,s.fetchUserProfile)();if(!t)return void e.push("/signup");u(t);let r=(0,a.checkProfileCompletion)(t);(f(r),r.isComplete)?e.push("/matches"):c(!1)};return l?(0,t.jsx)("div",{className:`min-h-screen flex items-center justify-center ${"light"===n?"bg-white":"bg-gradient-to-br from-slate-950 via-indigo-950 to-slate-900"}`,children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"light"===n?"text-gray-900":"text-white",children:"Loading your profile..."})]})}):(0,t.jsx)("div",{className:`min-h-screen ${"light"===n?"bg-white":"bg-gradient-to-br from-slate-950 via-indigo-950 to-slate-900"}`,children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,t.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-8 h-8 text-orange-500",children:(0,t.jsx)("path",{d:"M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-orange-600 via-orange-500 to-red-500 bg-clip-text text-transparent",children:"Complete Your Profile"})]}),h&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("p",{className:`text-lg mb-2 ${"light"===n?"text-gray-700":"text-gray-300"}`,children:(0,a.getCompletionMessage)(h)}),(0,t.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-orange-600 to-red-500 h-3 rounded-full transition-all duration-500",style:{width:`${h.percentage}%`}})}),(0,t.jsxs)("p",{className:`text-sm mt-2 ${"light"===n?"text-gray-600":"text-gray-400"}`,children:[h.percentage,"% Complete"]})]})]}),h&&h.missingFields.length>0&&(0,t.jsxs)("div",{className:`rounded-2xl border p-6 mb-6 ${"light"===n?"border-gray-200 bg-white":"border-gray-700 bg-zinc-800"}`,children:[(0,t.jsx)("h2",{className:`text-xl font-semibold mb-4 ${"light"===n?"text-gray-900":"text-white"}`,children:"Required to Complete:"}),(0,t.jsx)("ul",{className:"space-y-3",children:h.missingFields.map((e,r)=>(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"text-orange-500 mt-1",children:"â—"}),(0,t.jsx)("span",{className:"light"===n?"text-gray-700":"text-gray-300",children:e})]},r))})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[h&&!h.requiredFields.emailVerified&&(0,t.jsx)("button",{onClick:()=>e.push("/auth/verify-email"),className:"w-full py-4 rounded-xl bg-gradient-to-r from-orange-600 to-red-500 text-white font-semibold shadow-lg hover:shadow-xl transition-all",children:"âœ‰ï¸ Verify Email"}),h&&!h.requiredFields.phoneVerified&&(0,t.jsx)("button",{onClick:()=>e.push("/auth/verify-phone"),className:"w-full py-4 rounded-xl bg-gradient-to-r from-orange-600 to-red-500 text-white font-semibold shadow-lg hover:shadow-xl transition-all",children:"ðŸ“± Verify Phone Number"}),(0,t.jsx)("button",{onClick:()=>e.push("/profile/profile"),className:"w-full py-4 rounded-xl bg-gradient-to-r from-orange-600 to-red-500 text-white font-semibold shadow-lg hover:shadow-xl transition-all",children:"âœï¸ Complete Profile Details"})]}),h&&h.percentage>=50&&(0,t.jsx)("div",{className:"text-center mt-6",children:(0,t.jsx)("button",{onClick:()=>e.push("/matches"),className:`text-sm underline ${"light"===n?"text-gray-600 hover:text-gray-900":"text-gray-400 hover:text-gray-200"}`,children:"I'll finish this later"})}),(0,t.jsx)("div",{className:`mt-8 p-4 rounded-lg ${"light"===n?"bg-orange-50 border border-orange-200":"bg-orange-900/20 border border-orange-800"}`,children:(0,t.jsxs)("p",{className:`text-sm ${"light"===n?"text-orange-900":"text-orange-300"}`,children:[(0,t.jsx)("strong",{children:"Why complete your profile?"})," Complete profiles get 10x more matches! Help others find their perfect cosmic connection. âœ¨"]})})]})})}e.s(["default",()=>n])}]);