# Generated .cursorrules
# DO NOT EDIT THIS FILE DIRECTLY.
# Source files live in /rules. Run: npm run rules:build


# ========== 00-core.md ==========

# Core Development Rules

## ğŸ¯ Project Principles
- **User-First**: Every feature must enhance user experience
- **Astrological Accuracy**: All compatibility calculations must be based on real astrological principles
- **Performance**: App must be fast and responsive
- **Accessibility**: Must work for all users regardless of ability

## ğŸ“‹ Code Standards
- **TypeScript**: All code must be fully typed
- **ESLint**: Follow strict linting rules
- **Prettier**: Consistent code formatting
- **Comments**: Document complex logic and business rules

## ğŸ—ï¸ Architecture Rules
- **Component-Based**: Use React functional components with hooks
- **Separation of Concerns**: Keep UI, logic, and data separate
- **Reusable**: Build components that can be reused across the app
- **Testable**: Write code that can be easily tested

## ğŸ”’ Security Rules
- **Never expose API keys**: Use environment variables
- **Validate all inputs**: Sanitize user data
- **Secure authentication**: Use Supabase auth properly
- **Protect user data**: Follow privacy best practices

## ğŸ“± Mobile-First
- **Responsive Design**: Work on all screen sizes
- **Touch-Friendly**: 44px minimum touch targets
- **Performance**: Optimize for mobile devices
- **Offline Support**: Handle network issues gracefully

## ğŸš€ Deployment Rules
- **Environment Variables**: Use proper env var management
- **Build Optimization**: Minimize bundle size
- **Error Handling**: Graceful error recovery
- **Monitoring**: Track app performance and errors


# ========== 10-frontend.md ==========

# Frontend Development Rules

## ğŸ¨ UI/UX Standards
- **Design System**: Use consistent colors, typography, and spacing
- **Dark Mode**: Support both light and dark themes
- **Accessibility**: WCAG 2.1 AA compliance
- **Responsive**: Mobile-first design approach

## âš›ï¸ React Rules
- **Functional Components**: Use hooks, not class components
- **Custom Hooks**: Extract reusable logic into custom hooks
- **State Management**: Use React state and context appropriately
- **Performance**: Use React.memo, useMemo, useCallback when needed

## ğŸ¯ Component Structure
```
src/components/
â”œâ”€â”€ ui/           # Basic UI components (Button, Input, etc.)
â”œâ”€â”€ forms/        # Form components
â”œâ”€â”€ charts/       # Chart and visualization components
â””â”€â”€ features/     # Feature-specific components
```

## ğŸ“± Navigation Rules
- **React Router**: Use for client-side routing
- **Protected Routes**: Authenticate before accessing
- **Deep Linking**: Support URL-based navigation
- **Back Button**: Handle browser back/forward properly

## ğŸ¨ Styling Rules
- **Tailwind CSS**: Use utility classes for styling
- **Custom Components**: Create reusable styled components
- **Responsive**: Use responsive prefixes (sm:, md:, lg:)
- **Dark Mode**: Use dark: prefix for dark mode styles

## ğŸ“Š State Management
- **Local State**: Use useState for component state
- **Global State**: Use Context API for app-wide state
- **Server State**: Use React Query for server data
- **Form State**: Use controlled components with useState

## ğŸ”„ Data Flow
- **Props Down**: Pass data from parent to child
- **Events Up**: Use callbacks for child-to-parent communication
- **Context**: Use for deeply nested data sharing
- **Custom Hooks**: Extract complex state logic

## ğŸ“± Mobile Considerations
- **Touch Events**: Handle touch gestures properly
- **Viewport**: Set proper viewport meta tag
- **Performance**: Optimize for mobile devices
- **Offline**: Handle network connectivity issues


# ========== 20-backend.md ==========

# Backend Development Rules

## ğŸ—„ï¸ Database Design
- **Normalization**: Avoid data duplication
- **Indexing**: Create proper indexes for queries
- **Relationships**: Use foreign keys appropriately
- **Data Types**: Choose appropriate data types

## ğŸ” Authentication Rules
- **Supabase Auth**: Use Supabase for all authentication
- **JWT Tokens**: Handle tokens securely
- **Session Management**: Implement proper session handling
- **Password Security**: Use strong password requirements

## ğŸ“Š API Design
- **RESTful**: Follow REST conventions
- **Error Handling**: Return proper HTTP status codes
- **Validation**: Validate all input data
- **Rate Limiting**: Implement rate limiting for API endpoints

## ğŸ”’ Security Rules
- **Input Validation**: Sanitize all user inputs
- **SQL Injection**: Use parameterized queries
- **XSS Protection**: Escape output data
- **CORS**: Configure CORS properly

## ğŸ“± Real-time Features
- **WebSockets**: Use for real-time chat
- **Event Handling**: Handle connection/disconnection
- **Message Queuing**: Queue messages when offline
- **Scalability**: Design for multiple users

## ğŸ—ƒï¸ Data Storage
- **User Profiles**: Store user data securely
- **Matches**: Track user matches and interactions
- **Messages**: Store chat messages with encryption
- **Analytics**: Track user behavior (privacy-compliant)

## ğŸ”„ Data Synchronization
- **Offline Support**: Handle offline data changes
- **Conflict Resolution**: Resolve data conflicts
- **Backup**: Regular data backups
- **Recovery**: Disaster recovery procedures

## ğŸ“Š Performance Rules
- **Query Optimization**: Optimize database queries
- **Caching**: Use appropriate caching strategies
- **CDN**: Use CDN for static assets
- **Monitoring**: Monitor backend performance


# ========== 30-supabase.md ==========

# Supabase Integration Rules

## ğŸ”§ Setup Rules
- **Environment Variables**: Use proper env var naming
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- **Client Initialization**: Initialize client once and reuse
- **Error Handling**: Handle Supabase errors gracefully

## ğŸ” Authentication Rules
- **OAuth Providers**: Support Google, Facebook, Apple
- **Email Magic Links**: Implement email authentication
- **Session Management**: Handle user sessions properly
- **User Profiles**: Create user profiles on first login

## ğŸ—„ï¸ Database Rules
- **Row Level Security**: Enable RLS on all tables
- **Policies**: Write secure RLS policies
- **Migrations**: Use Supabase migrations for schema changes
- **Backups**: Regular database backups

## ğŸ“Š Real-time Rules
- **Subscriptions**: Use Supabase real-time for chat
- **Event Handling**: Handle real-time events properly
- **Connection Management**: Manage WebSocket connections
- **Error Recovery**: Handle connection failures

## ğŸ”’ Security Rules
- **RLS Policies**: Secure all data access
- **API Keys**: Never expose service role keys
- **User Data**: Protect user privacy
- **Audit Logs**: Log important user actions

## ğŸ“± Client Rules
- **Type Safety**: Use generated TypeScript types
- **Error Handling**: Handle all Supabase errors
- **Loading States**: Show loading indicators
- **Offline Support**: Handle offline scenarios

## ğŸš€ Performance Rules
- **Query Optimization**: Optimize database queries
- **Caching**: Use appropriate caching strategies
- **Connection Pooling**: Manage connections efficiently
- **Monitoring**: Monitor Supabase usage and performance

## ğŸ“‹ Best Practices
- **Type Generation**: Use `supabase gen types typescript`
- **Local Development**: Use Supabase CLI for local development
- **Testing**: Test Supabase integration thoroughly
- **Documentation**: Document all Supabase usage


# ========== 40-matching-engine.md ==========

# Matching Engine Rules

## ğŸ”® Astrological Accuracy
- **Real Calculations**: Use actual astrological principles
- **Sign Compatibility**: Base on element and modality compatibility
- **East-West System**: Support both Western and Chinese astrology
- **Birth Chart Data**: Use sun, moon, and rising signs

## ğŸ“Š Compatibility Matrix
- **144 Combinations**: Support all Western-Chinese combinations
- **Scoring System**: Use 0-100 compatibility scores
- **Weighted Factors**: Consider multiple astrological factors
- **Real-time Updates**: Update compatibility as profiles change

## ğŸ§® Calculation Rules
- **Precision**: Use accurate date/time calculations
- **Timezone Handling**: Handle different timezones properly
- **Sign Assignment**: Use exact date ranges for sign assignment
- **Element Harmony**: Calculate element compatibility

## ğŸ“± Performance Rules
- **Fast Calculations**: Optimize for real-time matching
- **Caching**: Cache compatibility results
- **Batch Processing**: Process multiple matches efficiently
- **Memory Management**: Handle large datasets efficiently

## ğŸ”„ Data Flow
- **Input Validation**: Validate birth date and time
- **Sign Calculation**: Calculate signs automatically
- **Compatibility Scoring**: Generate compatibility scores
- **Ranking**: Rank matches by compatibility

## ğŸ¯ Matching Rules
- **Distance Filtering**: Filter by geographic proximity
- **Age Preferences**: Respect age preferences
- **Gender Preferences**: Respect orientation preferences
- **Cooldown Periods**: Implement pass cooldowns

## ğŸ“Š Analytics Rules
- **Match Tracking**: Track successful matches
- **User Behavior**: Analyze user preferences
- **Compatibility Trends**: Identify popular combinations
- **Privacy**: Protect user data and preferences

## ğŸ”§ Engine Architecture
- **Modular Design**: Separate calculation modules
- **Type Safety**: Use TypeScript for all calculations
- **Testing**: Test all calculation functions
- **Documentation**: Document all astrological formulas

## ğŸš€ Optimization Rules
- **Algorithm Efficiency**: Use efficient algorithms
- **Memory Usage**: Minimize memory footprint
- **CPU Usage**: Optimize for mobile devices
- **Battery Life**: Minimize battery drain


# ========== 99-donts.md ==========

# What NOT to Do - Anti-Patterns

## âŒ Code Anti-Patterns
- **Don't use `any` type**: Always use proper TypeScript types
- **Don't ignore errors**: Handle all errors gracefully
- **Don't hardcode values**: Use constants and environment variables
- **Don't skip validation**: Validate all user inputs

## ğŸš« Security Anti-Patterns
- **Don't expose API keys**: Never commit API keys to version control
- **Don't trust user input**: Always validate and sanitize
- **Don't skip authentication**: Protect all sensitive routes
- **Don't store passwords**: Use proper authentication systems

## ğŸ“± UI/UX Anti-Patterns
- **Don't ignore accessibility**: Always consider screen readers
- **Don't use small touch targets**: Minimum 44px touch targets
- **Don't ignore loading states**: Show loading indicators
- **Don't break on small screens**: Test on all device sizes

## ğŸ—„ï¸ Database Anti-Patterns
- **Don't use raw SQL**: Use parameterized queries
- **Don't ignore indexes**: Create proper database indexes
- **Don't store sensitive data**: Encrypt sensitive information
- **Don't skip backups**: Regular database backups

## ğŸ”„ State Management Anti-Patterns
- **Don't mutate state directly**: Use immutable updates
- **Don't overuse global state**: Use local state when possible
- **Don't ignore cleanup**: Clean up subscriptions and timers
- **Don't skip error boundaries**: Handle component errors

## ğŸ“Š Performance Anti-Patterns
- **Don't load everything**: Use lazy loading and pagination
- **Don't ignore bundle size**: Monitor and optimize bundle size
- **Don't skip image optimization**: Compress and optimize images
- **Don't ignore memory leaks**: Clean up resources properly

## ğŸ§ª Testing Anti-Patterns
- **Don't skip tests**: Write tests for critical functionality
- **Don't test implementation**: Test behavior, not implementation
- **Don't ignore edge cases**: Test boundary conditions
- **Don't skip integration tests**: Test full user flows

## ğŸš€ Deployment Anti-Patterns
- **Don't deploy to production**: Use staging environments
- **Don't ignore environment variables**: Use proper env var management
- **Don't skip monitoring**: Set up error tracking and analytics
- **Don't ignore performance**: Monitor app performance

## ğŸ”® Astrological Anti-Patterns
- **Don't fake calculations**: Use real astrological principles
- **Don't ignore timezones**: Handle timezone conversions properly
- **Don't skip validation**: Validate birth date and time
- **Don't use outdated data**: Keep astrological data current

## ğŸ“± Mobile Anti-Patterns
- **Don't ignore touch gestures**: Support swipe and tap gestures
- **Don't break offline**: Handle network connectivity issues
- **Don't ignore battery life**: Optimize for mobile devices
- **Don't skip responsive design**: Test on all screen sizes
